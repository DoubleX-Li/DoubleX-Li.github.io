<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Linuxç£ç›˜ç©ºé—´è€—å°½çš„è¯¡å¼‚é—®é¢˜</title>
      <link href="/2018/05/09/Linux%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E8%80%97%E5%B0%BD%E7%9A%84%E8%AF%A1%E5%BC%82%E9%97%AE%E9%A2%98/"/>
      <url>/2018/05/09/Linux%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E8%80%97%E5%B0%BD%E7%9A%84%E8%AF%A1%E5%BC%82%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="Linux-ç£ç›˜ç©ºé—´è€—å°½çš„è¯¡å¼‚é—®é¢˜"><a href="#Linux-ç£ç›˜ç©ºé—´è€—å°½çš„è¯¡å¼‚é—®é¢˜" class="headerlink" title="Linux ç£ç›˜ç©ºé—´è€—å°½çš„è¯¡å¼‚é—®é¢˜"></a>Linux ç£ç›˜ç©ºé—´è€—å°½çš„è¯¡å¼‚é—®é¢˜</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœåŠ¡å™¨ä¸Šæœ‰è®¸å¤špythonè„šæœ¬åœ¨ä¸åœçš„ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ä½¿ç”¨äº†loggingæ¨¡å—çš„rotatedfilehandlerï¼Œè‡ªåŠ¨è½®è½¬åˆ é™¤15æ—¥ä»¥ä¸Šçš„æ—¥å¿—ã€‚å¦å¤–ä¸€éƒ¨åˆ†ä½¿ç”¨å¤šè¿›ç¨‹çš„ç¨‹åºæš‚æ—¶æ²¡æœ‰é…ç½®ï¼Œä»ç”¨nohupé‡å®šå‘è¾“å‡ºåˆ°ç£ç›˜æ–‡ä»¶çš„æ–¹å¼ã€‚å¯¹äºè¿™ä¸€éƒ¨åˆ†ç¨‹åºç”Ÿæˆçš„.outæ—¥å¿—ï¼Œæœ‰ä¸€ä¸ªå•ç‹¬çš„è„šæœ¬æ¯æ—¥åˆ é™¤ã€‚</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>æˆ‘å‘ç°æœåŠ¡å™¨ä¸Šè«åå…¶å¦™çš„å°‘äº†è¿‘90Gçš„ç©ºé—´ï¼ŒæŸ¥æ¥æŸ¥å»å‘ç°æ˜¯å› ä¸º.outæ–‡ä»¶å¯¹åº”çš„ç¨‹åºæ²¡æœ‰åœæ­¢ï¼Œç›¸å…³çš„æ–‡ä»¶å¥æŸ„æ²¡æœ‰é‡Šæ”¾ï¼Œå¯¼è‡´linuxå†…æ ¸å›æ”¶ä¸äº†è¿™ä¸€éƒ¨åˆ†ç©ºé—´ã€‚<br>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥çœ‹åˆ°è¢«åˆ é™¤äº†ä½†æ˜¯å¥æŸ„æ²¡æœ‰é‡Šæ”¾çš„æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -n | grep deleted</span><br></pre></td></tr></table></figure><p>å°†å¯¹åº”çš„ç¨‹åºæ€æ‰å°±é‡Šæ”¾äº†è¢«å ç”¨çš„ç©ºé—´ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>filter vs list comprehension vs for loop</title>
      <link href="/2018/04/13/filter-vs-list-comprehension-vs-for-loop/"/>
      <url>/2018/04/13/filter-vs-list-comprehension-vs-for-loop/</url>
      <content type="html"><![CDATA[<h1 id="æ¯”è¾ƒfilterå‡½æ•°å’Œåˆ—è¡¨æ¨å¯¼å¼æ•ˆç‡"><a href="#æ¯”è¾ƒfilterå‡½æ•°å’Œåˆ—è¡¨æ¨å¯¼å¼æ•ˆç‡" class="headerlink" title="æ¯”è¾ƒfilterå‡½æ•°å’Œåˆ—è¡¨æ¨å¯¼å¼æ•ˆç‡"></a>æ¯”è¾ƒfilterå‡½æ•°å’Œåˆ—è¡¨æ¨å¯¼å¼æ•ˆç‡</h1><p>å¥½å¥‡filterå‡½æ•°å’Œåˆ—è¡¨æ¨å¯¼å¼å“ªç§æ›´å¿«</p><h2 id="ä½¿ç”¨timeit"><a href="#ä½¿ç”¨timeit" class="headerlink" title="ä½¿ç”¨timeit"></a>ä½¿ç”¨timeit</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">nums = list(range(<span class="number">10000</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(value)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> value % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">use_filter</span><span class="params">()</span>:</span></span><br><span class="line">    result = list(filter(is_odd, nums))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">use_list_comprehension</span><span class="params">()</span>:</span></span><br><span class="line">    result = [num <span class="keyword">for</span> num <span class="keyword">in</span> nums <span class="keyword">if</span> is_odd(num)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">use_forloop</span><span class="params">()</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">        <span class="keyword">if</span> is_odd(num):</span><br><span class="line">            result.append(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>, <span class="number">10000</span>]:</span><br><span class="line">        print(<span class="string">f'i = <span class="subst">&#123;i&#125;</span>'</span>)</span><br><span class="line">        print(timeit.repeat(<span class="string">"use_filter()"</span>, setup=<span class="string">"from __main__ import use_filter"</span>, repeat=<span class="number">5</span>, number=i))</span><br><span class="line">        print(timeit.repeat(<span class="string">"use_list_comprehension()"</span>, setup=<span class="string">"from __main__ import use_list_comprehension"</span>, repeat=<span class="number">5</span>,</span><br><span class="line">                            number=i))</span><br><span class="line">        print(timeit.repeat(<span class="string">"use_forloop()"</span>, setup=<span class="string">"from __main__ import use_forloop"</span>, repeat=<span class="number">5</span>, number=i))</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">i = 10</span><br><span class="line">[0.009981556529392921, 0.01118395884586795, 0.010409208672474444, 0.00989167182441069, 0.010731736143293015]</span><br><span class="line">[0.01227781527293538, 0.01167132677911066, 0.012889591102347275, 0.011987633855120791, 0.012602208862196485]</span><br><span class="line">[0.015128000174171041, 0.015430000342121719, 0.015144173200673045, 0.015289108399710122, 0.015036871390227136]</span><br><span class="line">i = 100</span><br><span class="line">[0.10597655533196693, 0.1038532235640996, 0.1065852209639746, 0.10463263903359943, 0.10483293574643182]</span><br><span class="line">[0.12412860044227014, 0.12568121098646123, 0.12591976312736564, 0.12167465469033334, 0.12343502642112703]</span><br><span class="line">[0.15269358646193276, 0.1535697290707041, 0.1513428277292761, 0.1535998979855253, 0.1519990793815682]</span><br><span class="line">i = 1000</span><br><span class="line">[1.0562684473583537, 1.056365796537106, 1.054425655396348, 1.057423574674285, 1.0545009221735304]</span><br><span class="line">[1.2489361569778836, 1.2586884919585835, 1.2246461372903337, 1.2813008711662928, 1.2368527290427114]</span><br><span class="line">[1.5348320337891845, 1.5393803864731286, 1.5281827427586805, 1.5293807907987933, 1.5362711221281202]</span><br><span class="line">i = 10000</span><br><span class="line">[10.563701819154463, 10.706948492020786, 10.6040463668229, 10.637917349614185, 10.590753694136964]</span><br><span class="line">[12.483121269706999, 12.631777197898757, 12.308776666054996, 12.286822093598275, 12.31480267352569]</span><br><span class="line">[15.263468554349146, 15.329303657903182, 15.277603779511878, 15.250327659296516, 15.312874662154798]</span><br></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šç»“æœï¼Œæ˜¾ç„¶filterå‡½æ•°æœ€å¿«ğŸ˜„ï¼Œåˆ—è¡¨æ¨å¯¼å¼å…¶æ¬¡ğŸ˜ï¼Œforå¾ªç¯æœ€æ…¢â˜¹ï¸</p><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/22108488/are-list-comprehensions-and-functional-functions-faster-than-for-loops" target="_blank" rel="noopener">stackoverflow</a></p>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨pyenvç®¡ç†pythonç‰ˆæœ¬</title>
      <link href="/2017/10/12/%E4%BD%BF%E7%94%A8pyenv%E7%AE%A1%E7%90%86python%E7%89%88%E6%9C%AC/"/>
      <url>/2017/10/12/%E4%BD%BF%E7%94%A8pyenv%E7%AE%A1%E7%90%86python%E7%89%88%E6%9C%AC/</url>
      <content type="html"><![CDATA[<h1 id="ä½¿ç”¨pyenvç®¡ç†pythonç‰ˆæœ¬"><a href="#ä½¿ç”¨pyenvç®¡ç†pythonç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨pyenvç®¡ç†pythonç‰ˆæœ¬"></a>ä½¿ç”¨pyenvç®¡ç†pythonç‰ˆæœ¬</h1><h2 id="å®‰è£…å‰å‡†å¤‡"><a href="#å®‰è£…å‰å‡†å¤‡" class="headerlink" title="å®‰è£…å‰å‡†å¤‡"></a>å®‰è£…å‰å‡†å¤‡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev</span><br></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨å®‰è£…"><a href="#è‡ªåŠ¨å®‰è£…" class="headerlink" title="è‡ªåŠ¨å®‰è£…"></a>è‡ªåŠ¨å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl -L https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer | bash</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…åæ“ä½œ"><a href="#å®‰è£…åæ“ä½œ" class="headerlink" title="å®‰è£…åæ“ä½œ"></a>å®‰è£…åæ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Load pyenv automatically by adding</span></span><br><span class="line"><span class="comment"># the following to ~/.bash_profile:</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/home/&lt;username&gt;/.pyenv/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv virtualenv-init -)</span>"</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="æŸ¥çœ‹å·²å®‰è£…pythonç‰ˆæœ¬"><a href="#æŸ¥çœ‹å·²å®‰è£…pythonç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å·²å®‰è£…pythonç‰ˆæœ¬"></a>æŸ¥çœ‹å·²å®‰è£…pythonç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv versions</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å¯å®‰è£…pythonç‰ˆæœ¬"><a href="#æŸ¥çœ‹å¯å®‰è£…pythonç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å¯å®‰è£…pythonç‰ˆæœ¬"></a>æŸ¥çœ‹å¯å®‰è£…pythonç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv install -l</span><br></pre></td></tr></table></figure><h3 id="pythonå®‰è£…ä¸å¸è½½"><a href="#pythonå®‰è£…ä¸å¸è½½" class="headerlink" title="pythonå®‰è£…ä¸å¸è½½"></a>pythonå®‰è£…ä¸å¸è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv install 3.6.3</span><br><span class="line">pyenv uninstall 3.6.3</span><br></pre></td></tr></table></figure><h3 id="pythonç‰ˆæœ¬åˆ‡æ¢"><a href="#pythonç‰ˆæœ¬åˆ‡æ¢" class="headerlink" title="pythonç‰ˆæœ¬åˆ‡æ¢"></a>pythonç‰ˆæœ¬åˆ‡æ¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv global 3.6.3</span><br><span class="line">pyenv <span class="built_in">local</span> 3.6.3</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="pyenv-virtualenv"><a href="#pyenv-virtualenv" class="headerlink" title="pyenv-virtualenv"></a>pyenv-virtualenv</h3><p>è‡ªåŠ¨å®‰è£…pyenvåï¼Œä¼šè‡ªåŠ¨å®‰è£…éƒ¨åˆ†æ’ä»¶ã€‚</p><p>pyenv-virtualenvèƒ½å¾ˆå¥½çš„å°†pyenvå’Œvirtualenvç»“åˆã€‚</p><h4 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv virtualenv 3.7.3 env-3.7.3</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å½“å‰å·²å®‰è£…è™šæ‹Ÿç¯å¢ƒ"><a href="#æŸ¥çœ‹å½“å‰å·²å®‰è£…è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="æŸ¥çœ‹å½“å‰å·²å®‰è£…è™šæ‹Ÿç¯å¢ƒ"></a>æŸ¥çœ‹å½“å‰å·²å®‰è£…è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv virtualenvs</span><br></pre></td></tr></table></figure><h4 id="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒ"></a>åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv activate env-3.6.3</span><br><span class="line">pyenv deactivate</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"></a>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pyenv uninstall env-3.6.3</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥åˆ é™¤å…¶ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">rm -rf ~/.pyenv/versions/env-3.6.3</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨sshè¿æ¥virtualboxä¸­çš„Ubuntu</title>
      <link href="/2017/04/24/%E4%BD%BF%E7%94%A8ssh%E8%BF%9E%E6%8E%A5virtualbox%E4%B8%AD%E7%9A%84Ubuntu/"/>
      <url>/2017/04/24/%E4%BD%BF%E7%94%A8ssh%E8%BF%9E%E6%8E%A5virtualbox%E4%B8%AD%E7%9A%84Ubuntu/</url>
      <content type="html"><![CDATA[<p>è¿è¡Œè™šæ‹Ÿæœºæ—¶ï¼Œæœ‰æ—¶ä¸éœ€è¦å›¾å½¢ç•Œé¢ã€‚</p><a id="more"></a><h1 id="Ubuntuä¸­å®‰è£…ssh"><a href="#Ubuntuä¸­å®‰è£…ssh" class="headerlink" title="Ubuntuä¸­å®‰è£…ssh"></a>Ubuntuä¸­å®‰è£…ssh</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure><h1 id="å°†VBoxManageåŠ å…¥ç¯å¢ƒå˜é‡"><a href="#å°†VBoxManageåŠ å…¥ç¯å¢ƒå˜é‡" class="headerlink" title="å°†VBoxManageåŠ å…¥ç¯å¢ƒå˜é‡"></a>å°†VBoxManageåŠ å…¥ç¯å¢ƒå˜é‡</h1><p>æ‰¾åˆ°<code>VBoxManage.exe</code>çš„è·¯å¾„</p><p><img src="https://ooo.0o0.ooo/2017/04/24/58fcd90fe4ee3.png" alt="1.png"></p><p>æ·»åŠ åˆ°<code>Path</code>ä¸­</p><p><img src="https://ooo.0o0.ooo/2017/04/24/58fcd90fe886a.png" alt="2.png"></p><h1 id="æ— ç•Œé¢å¯åŠ¨è™šæ‹Ÿæœº"><a href="#æ— ç•Œé¢å¯åŠ¨è™šæ‹Ÿæœº" class="headerlink" title="æ— ç•Œé¢å¯åŠ¨è™šæ‹Ÿæœº"></a>æ— ç•Œé¢å¯åŠ¨è™šæ‹Ÿæœº</h1><p>ä½¿ç”¨å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe startvm Ubuntu -<span class="built_in">type</span> headless</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è™šæ‹Ÿæœº</p><p><img src="https://ooo.0o0.ooo/2017/04/24/58fcd9103700f.png" alt="3.png"></p><h1 id="ä½¿ç”¨sshè¿æ¥"><a href="#ä½¿ç”¨sshè¿æ¥" class="headerlink" title="ä½¿ç”¨sshè¿æ¥"></a>ä½¿ç”¨sshè¿æ¥</h1><p>ä½¿ç”¨sshå®¢æˆ·ç«¯ï¼Œå¦‚xshellï¼Œè¿æ¥Ubuntu</p><p><img src="https://ooo.0o0.ooo/2017/04/24/58fcda3f46e40.png" alt="4.png"></p><h1 id="é™„ï¼šVBoxManageå¸¸ç”¨å‘½ä»¤"><a href="#é™„ï¼šVBoxManageå¸¸ç”¨å‘½ä»¤" class="headerlink" title="é™„ï¼šVBoxManageå¸¸ç”¨å‘½ä»¤"></a>é™„ï¼šVBoxManageå¸¸ç”¨å‘½ä»¤</h1><p>æŸ¥çœ‹æœ‰å“ªäº›è™šæ‹Ÿæœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe list vms</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è™šæ‹Ÿæœºçš„è¯¦ç»†ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe list vms --long</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è¿è¡Œç€çš„è™šæ‹Ÿæœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe list runningvms</span><br></pre></td></tr></table></figure><p>å¼€å¯è™šæ‹Ÿæœºåœ¨åå°è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe startvm &lt;vm_name&gt; -<span class="built_in">type</span> headless</span><br></pre></td></tr></table></figure><p>å¼€å¯è™šæ‹Ÿæœºå¹¶å¼€å¯è¿œç¨‹æ¡Œé¢è¿æ¥çš„æ”¯æŒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe startvm &lt;vm_name&gt; -<span class="built_in">type</span> vrdp</span><br></pre></td></tr></table></figure><p>æ”¹å˜è™šæ‹Ÿæœºçš„è¿œç¨‹è¿æ¥ç«¯å£ï¼Œç”¨äºå¤šä¸ªè™šæ‹ŸæœºåŒæ—¶è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe controlvm &lt;vm_name&gt; vrdpprot &lt;ports&gt;</span><br></pre></td></tr></table></figure><p>å…³é—­è™šæ‹Ÿæœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe controlvm &lt;vm_name&gt; acpipowerbutton</span><br></pre></td></tr></table></figure><p>å¼ºåˆ¶å…³é—­è™šæ‹Ÿæœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage.exe controlvm &lt;vm_name&gt; poweroff</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> virtualbox </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>gitâ€”â€”ä»å†å²è®°å½•ä¸­åˆ é™¤æ–‡ä»¶</title>
      <link href="/2017/03/18/git%E2%80%94%E2%80%94%E4%BB%8E%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E4%B8%AD%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6/"/>
      <url>/2017/03/18/git%E2%80%94%E2%80%94%E4%BB%8E%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E4%B8%AD%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>å†™é¡¹ç›®çš„æ—¶å€™ä¸å°å¿ƒæŠŠè´¦å·å¯†ç ç­‰ä¿¡æ¯æäº¤åˆ°githubä¸Šäº†ã€‚</p><p>ç›´æ¥åˆ é™¤æ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦ä»gitå†å²ä¸­åˆ é™¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --force --index-filter <span class="string">'git rm --cached --ignore-unmatch path_to_your_file'</span> --prune-empty --tag-name-filter cat -- --all</span><br><span class="line">git push origin master --force</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ–‡ä»¶åå†ä»¥å¼ºåˆ¶è¦†ç›–çš„æ–¹å¼å‘githubæ¨é€repoå°±å¯ä»¥è§£å†³é—®é¢˜ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸€ä¸ªå¾®åšç²‰ä¸ä¿¡æ¯çˆ¬è™«</title>
      <link href="/2017/03/14/%E4%B8%80%E4%B8%AA%E5%BE%AE%E5%8D%9A%E7%B2%89%E4%B8%9D%E4%BF%A1%E6%81%AF%E7%88%AC%E8%99%AB/"/>
      <url>/2017/03/14/%E4%B8%80%E4%B8%AA%E5%BE%AE%E5%8D%9A%E7%B2%89%E4%B8%9D%E4%BF%A1%E6%81%AF%E7%88%AC%E8%99%AB/</url>
      <content type="html"><![CDATA[<p>è®°å½•ä¸€æ¬¡å¾®åšç²‰ä¸ä¿¡æ¯çˆ¬å–ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/DoubleX-Li/weibo.git" target="_blank" rel="noopener">https://github.com/DoubleX-Li/weibo.git</a></p><a id="more"></a><h1 id="å¤±è´¥çš„å°è¯•"><a href="#å¤±è´¥çš„å°è¯•" class="headerlink" title="å¤±è´¥çš„å°è¯•"></a>å¤±è´¥çš„å°è¯•</h1><p>ç§‰æ‰¿å…ˆå°è¯•æ‰‹æœºç«¯é¡µé¢çš„åŸåˆ™ï¼Œæˆ‘é€‰æ‹©äº†<a href="http://weibo.cn/" target="_blank" rel="noopener">weibo.cn</a>ã€‚</p><h2 id="æ‰¾åˆ°ç²‰ä¸é¡µé¢"><a href="#æ‰¾åˆ°ç²‰ä¸é¡µé¢" class="headerlink" title="æ‰¾åˆ°ç²‰ä¸é¡µé¢"></a>æ‰¾åˆ°ç²‰ä¸é¡µé¢</h2><p>æ¥ä¸‹æ¥æ˜¯è¦æ‰¾åˆ°ç²‰ä¸é¡µé¢ï¼Œä»¥<a href="http://weibo.cn/1788911247" target="_blank" rel="noopener">è°·å¤§ç™½è¯</a>ä¸ºä¾‹ã€‚</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7ca88482cd.png" alt="1.png"></p><p>å¯ä»¥çœ‹åˆ°<a href="http://weibo.cn/1788911247/fans" target="_blank" rel="noopener">ç²‰ä¸é¡µé¢</a>å¾ˆæ˜æ˜¾åœ°æ”¾åœ¨é¡µé¢ä¸Šã€‚</p><h2 id="è§£æé¡µé¢ç»“æ„"><a href="#è§£æé¡µé¢ç»“æ„" class="headerlink" title="è§£æé¡µé¢ç»“æ„"></a>è§£æé¡µé¢ç»“æ„</h2><p>åœ¨Developer Toolsé‡Œé¢å¯ä»¥çœ‹åˆ°è¿”å›äº†ä¸€ä¸ªç®€å•çš„ç½‘é¡µã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">"top"</span> <span class="attr">style</span>=<span class="string">"width: 52px"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://weibo.cn/u/1764360474"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://tva3.sinaimg.cn/crop.0.6.750.750.50/692a011ajw8fdcde1yo4gj20ku0l63zf.jpg"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">alt</span>=<span class="string">"pic"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://weibo.cn/u/1764360474"</span>&gt;</span></span><br><span class="line">                    è°­é˜¿å€©</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                ç²‰ä¸254äºº</span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://weibo.cn/attention/add?uid=1764360474&amp;amp;rl=1&amp;amp;st=4561d5"</span>&gt;</span></span><br><span class="line">                    å…³æ³¨å¥¹</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"s"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ›´å¤šçš„table --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://weibo.cn/attention/batchadd?st=4561d5"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"rl"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"f"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"uidList"</span> <span class="attr">value</span>=<span class="string">"1764360474,6131087160,1644778123,5792666099,2608149357,1678455724,2200798573,1886160672,5856282793,2717084785"</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"å…³æ³¨ä»¥ä¸Šè¿™äº›äºº"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"s"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pa"</span> <span class="attr">id</span>=<span class="string">"pagelist"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/1788911247/fans"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1788911247/fans?page=3"</span>&gt;</span></span><br><span class="line">                    ä¸‹é¡µ</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &amp;nbsp;</span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1788911247/fans?page=1"</span>&gt;</span></span><br><span class="line">                    ä¸Šé¡µ</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &amp;nbsp;</span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1788911247/fans"</span>&gt;</span></span><br><span class="line">                    é¦–é¡µ</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &amp;nbsp;</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"mp"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"20"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"page"</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">style</span>=<span class="string">'-wap-input-format: "*N"'</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"è·³é¡µ"</span> /&gt;</span></span><br><span class="line">                &amp;nbsp;2/20é¡µ</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç½‘é¡µçš„éƒ¨åˆ†æºç å¦‚ä¸Šæ‰€ç¤ºï¼Œåˆ†æç½‘é¡µæºç å¯çŸ¥ï¼š</p><ol><li>ç²‰ä¸ä¿¡æ¯åœ¨æ¯ä¸ªtableæ ‡ç­¾çš„træ ‡ç­¾çš„ç¬¬äºŒä¸ªtdæ ‡ç­¾ä¸­ï¼›</li><li>ä¸‹ä¸€é¡µé“¾æ¥åœ¨idä¸ºpagelistçš„divä¸‹çš„formæ ‡ç­¾ä¸‹çš„divæ ‡ç­¾ä¸‹çš„ç¬¬ä¸€ä¸ªaæ ‡ç­¾ä¸­ã€‚</li></ol><p>ç”±ä»¥ä¸Šä¿¡æ¯å¯ä»¥å¾ˆå®¹æ˜“åœ°å†™å‡ºè§£æç²‰ä¸ä¿¡æ¯çš„ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_followers</span><span class="params">(self, response)</span>:</span></span><br><span class="line">fans = response.xpath(<span class="string">'//table/tbody/tr/td[2]/a[1]'</span>)</span><br><span class="line"><span class="keyword">for</span> fan <span class="keyword">in</span> fans:</span><br><span class="line">print(fan.xpath(<span class="string">'/text()'</span>)[<span class="number">0</span>].extract())</span><br><span class="line">print(fan.xpath(<span class="string">'/@href'</span>)[<span class="number">0</span>].extract())</span><br><span class="line"></span><br><span class="line">next_page = response.xpath(<span class="string">'//div[@id="pagelist"]/form/div/a/@href'</span>)[<span class="number">0</span>].extract()</span><br><span class="line"><span class="keyword">yield</span> Request(</span><br><span class="line">url=<span class="string">'http://weibo.cn/1788911247/fans?&#123;0&#125;'</span>.format(next_page),</span><br><span class="line">headers=self.cn_headers,</span><br><span class="line">callback=self.parse_followers</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿç™»å½•"><a href="#æ¨¡æ‹Ÿç™»å½•" class="headerlink" title="æ¨¡æ‹Ÿç™»å½•"></a>æ¨¡æ‹Ÿç™»å½•</h2><p>weibo.cnçš„<a href="https://login.weibo.cn/?" target="_blank" rel="noopener">ç™»å½•é¡µé¢</a>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7d41c8e507.png" alt="2.png"></p><p>ç™»å½•é¡µé¢çš„éƒ¨åˆ†æºç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"?rand=1242851600&amp;amp;backURL=http%3A%2F%2Fweibo.cn&amp;amp;backTitle=%E6%89%8B%E6%9C%BA%E6%96%B0%E6%B5%AA%E7%BD%91&amp;amp;vt=4"</span></span></span><br><span class="line"><span class="tag"><span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        æ‰‹æœºå·/ç”µå­é‚®ç®±/ä¼šå‘˜å¸å·:</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"mobile"</span> <span class="attr">size</span>=<span class="string">"30"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å¯†ç :(</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login/?backURL=http%3A%2F%2Fweibo.cn&amp;amp;backTitle=%E6%89%8B%E6%9C%BA%E6%96%B0%E6%B5%AA%E7%BD%91&amp;amp;vt=4&amp;amp;pt=1"</span>&gt;</span></span><br><span class="line">            ä½¿ç”¨æ˜æ–‡å¯†ç </span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        )</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password_1133"</span> <span class="attr">size</span>=<span class="string">"30"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        è¯·è¾“å…¥å›¾ç‰‡ä¸­çš„å­—ç¬¦:</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://weibo.cn/interface/f/ttt/captcha/show.php?cpt=2_f78c59f514b82660"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">"è¯·æ‰“å¼€å›¾ç‰‡æ˜¾ç¤º"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"code"</span> <span class="attr">size</span>=<span class="string">"8"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"remember"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span></span><br><span class="line">        è®°ä½ç™»å½•çŠ¶æ€ï¼Œéœ€æ”¯æŒå¹¶æ‰“å¼€æ‰‹æœºçš„cookieåŠŸèƒ½ã€‚</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"backURL"</span> <span class="attr">value</span>=<span class="string">"http%3A%2F%2Fweibo.cn"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"backTitle"</span> <span class="attr">value</span>=<span class="string">"æ‰‹æœºæ–°æµªç½‘"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"tryCount"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"vk"</span> <span class="attr">value</span>=<span class="string">"3255_00c0_1814994306"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"capId"</span> <span class="attr">value</span>=<span class="string">"2_f78c59f514b82660"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span> /&gt;</span></span><br><span class="line">        &amp;nbsp;</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://weibo.cn/reg/forgetpwd?backURL=http%3A%2F%2Fweibo.cn&amp;amp;backTitle=%E6%89%8B%E6%9C%BA%E6%96%B0%E6%B5%AA%E7%BD%91&amp;amp;vt=4"</span>&gt;</span></span><br><span class="line">            å¿˜è®°å¯†ç </span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        å°æç¤ºï¼š</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        1ã€ç™»å½•æˆåŠŸåä¿å­˜ä»»æ„é¡µé¢ä¸ºä¹¦ç­¾ï¼Œä¸‹æ¬¡é€šè¿‡ä¹¦ç­¾è®¿é—®ï¼Œä¹Ÿå¯å…å»ç™»å½•è¿‡ç¨‹ã€‚</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:red"</span>&gt;</span></span><br><span class="line">            2ã€è¯·ä¸è¦ç›´æ¥é€šè¿‡æ‰‹æœºæµè§ˆå™¨çš„å‘é€åœ°å€åŠŸèƒ½å°†ç™»å½•åçš„é¡µé¢åœ°å€å‘é€ç»™æœ‹å‹ï¼Œä»¥å…æ³„éœ²ä¸ªäººä¿¡æ¯åŠå¯†ç ã€‚</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"display:none"</span> <span class="attr">src</span>=<span class="string">"http://218.206.86.254/2008/match/c.gif?f=wap_reg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç›´æ¥ç‚¹å‡»ç™»å½•å¯ä»¥åœ¨Developer Toolsä¸­çœ‹åˆ°å‘é€postè¯·æ±‚æ—¶éœ€è¦ä¼ é€’çš„å‚æ•°ã€‚</p><p>å…¶ä¸­è·å–éªŒè¯ç çš„åœ°å€å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://weibo.cn/interface/f/ttt/captcha/show.php?cpt=2_f78c59f514b82660</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>2_f78c59f514b82660</code>åœ¨ç½‘é¡µæºç ä¸­çš„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"capId"</span> <span class="attr">value</span>=<span class="string">"2_f78c59f514b82660"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œ</p><p>Developer Toolsä¸­Form Dataçš„éƒ¨åˆ†å¦‚ä¸‹ï¼š</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7d613ac5d1.png" alt="3.png"></p><p>å¯ä»¥çœ‹åˆ°éœ€è¦ä¼ é€’çš„valueæœ‰<code>backURL</code>ã€<code>backTitle</code>ã€<code>tryCount</code>ã€<code>vk</code>ã€<code>capId</code>ã€<code>submit</code>ã€‚</p><p>è€Œä¸”ï¼Œkeyéƒ¨åˆ†çš„<code>password_1133</code>ä¹Ÿæ˜¯ä»ç½‘é¡µæºç ä¸­çš„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password_1133"</span> <span class="attr">size</span>=<span class="string">"30"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œè·å¾—çš„ã€‚</p><p>è‡³æ­¤ï¼Œå¯ä»¥å®¹æ˜“åœ°å†™å‡ºæ¨¡æ‹Ÿç™»å½•çš„ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_params</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    logging.info(<span class="string">'get_params'</span>)</span><br><span class="line">    post_url = response.xpath(<span class="string">'/html/body/div[2]/form/@action'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    password = response.xpath(<span class="string">'//input[@type="password"]/@name'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    backURL = response.xpath(<span class="string">'//input[@name="backURL"]/@value'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    backTitle = response.xpath(<span class="string">'//input[@name="backTitle"]/@value'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    tryCount = response.xpath(<span class="string">'//input[@name="tryCount"]/@value'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    vk = response.xpath(<span class="string">'//input[@name="vk"]/@value'</span>)[<span class="number">0</span>].extract()</span><br><span class="line">    capId = response.xpath(<span class="string">'//input[@name="capId"]/@value'</span>)[<span class="number">0</span>].extract()</span><br><span class="line"></span><br><span class="line">    self.params = (post_url, password, backURL, backTitle, tryCount, vk, capId)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">request_captcha</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    logging.info(<span class="string">'request_captcha'</span>)</span><br><span class="line">    self.get_params(response)</span><br><span class="line">    capId = self.params[<span class="number">6</span>]</span><br><span class="line">    <span class="comment"># è·å–éªŒè¯ç åœ°å€</span></span><br><span class="line">    cha_url = <span class="string">"http://weibo.cn/interface/f/ttt/captcha/show.php?cpt=&#123;0&#125;"</span>.format(capId)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‡†å¤‡ä¸‹è½½éªŒè¯ç </span></span><br><span class="line">    <span class="keyword">yield</span> Request(</span><br><span class="line">        url=cha_url,</span><br><span class="line">        headers=self.cn_headers,</span><br><span class="line">        meta=&#123;</span><br><span class="line">            <span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">        callback=self.download_captcha</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_captcha</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    logging.info(<span class="string">'download_captcha'</span>)</span><br><span class="line">    <span class="comment"># ä¸‹è½½éªŒè¯ç </span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'captcha.gif'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        fp.write(response.body)</span><br><span class="line">    <span class="comment"># ç”¨è½¯ä»¶æ‰“å¼€éªŒè¯ç å›¾ç‰‡</span></span><br><span class="line">    os.system(<span class="string">'start captcha.gif'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¾“å…¥éªŒè¯ç </span></span><br><span class="line">    print(<span class="string">'è¯·è¾“å…¥éªŒè¯ç : '</span>)</span><br><span class="line">    captcha = input()</span><br><span class="line"></span><br><span class="line">    post_url, password, backURL, backTitle, tryCount, vk, capId = self.params</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> FormRequest(</span><br><span class="line">        url=<span class="string">'https://login.weibo.cn/login/&#123;0&#125;'</span>.format(post_url),</span><br><span class="line">        headers=self.headers,</span><br><span class="line">        formdata=&#123;</span><br><span class="line">            <span class="string">'mobile'</span>: <span class="string">'your_telephone_number'</span>,</span><br><span class="line">            password: <span class="string">'your_password'</span>,</span><br><span class="line">            <span class="string">'code'</span>: captcha,</span><br><span class="line">            <span class="string">'remember'</span>: <span class="string">'on'</span>,</span><br><span class="line">            <span class="string">'backURL'</span>: backURL,</span><br><span class="line">            <span class="string">'backTitle'</span>: backTitle,</span><br><span class="line">            <span class="string">'tryCount'</span>: tryCount,</span><br><span class="line">            <span class="string">'vk'</span>: vk,</span><br><span class="line">            <span class="string">'capId'</span>: capId,</span><br><span class="line">            <span class="string">'submit'</span>: <span class="string">'ç™»å½•'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        meta=&#123;</span><br><span class="line">            <span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        callback=self.parse_followers</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘æ»¡å¿ƒæ¬¢å–œåœ°è¿è¡Œäº†æˆ‘çš„ç¨‹åºã€‚ç„¶è€Œï¼Œå‡ºç°äº†404ã€‚</p><p>é‡å¤è¿è¡Œç¨‹åºå‡ æ¬¡ä¹‹åï¼Œæˆ‘å°è¯•åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨ç™»å½•ã€‚</p><p>æ­¤æ—¶æˆ‘å‘ç°<span style="color:red">ç½‘é¡µç‰ˆä¹Ÿä¸èƒ½ç™»å½•ï¼</span></p><p>å¤§æ¦‚æ˜¯å¾®åšå¯ç”¨äº†ç»Ÿä¸€ç™»å½•è®¤è¯çš„åŸå› ï¼Œweibo.cnçš„ç™»å½•åŠŸèƒ½å·²ç»å¤±æ•ˆã€‚= =</p><h1 id="å†æ¬¡å°è¯•"><a href="#å†æ¬¡å°è¯•" class="headerlink" title="å†æ¬¡å°è¯•"></a>å†æ¬¡å°è¯•</h1><p>æˆ‘æŠŠç›®æ ‡æ¢åˆ°äº†<a href="http://m.weibo.cn/" target="_blank" rel="noopener">m.weibo.cn</a>ã€‚</p><p>ç»è¿‡äº†ä¸Šé¢çš„æƒ¨ç—›æ•™è®­ï¼Œé¦–å…ˆè¦è§£å†³ç™»å½•é—®é¢˜ã€‚</p><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><p><a href="http://m.weibo.cn/" target="_blank" rel="noopener">m.weibo.cn</a>æœ‰æ»‘åŠ¨éªŒè¯ï¼Œæš‚æ—¶ä¸çŸ¥é“è¦æ€ä¹ˆè§£å†³ã€‚</p><p>å…ˆå°è¯•ç›´æ¥ä¼ é€’cookieã€‚</p><p>æ„é€ headers</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">        <span class="string">"Accept"</span>: <span class="string">"application/json, text/plain, */*"</span>,</span><br><span class="line">        <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, sdch, br"</span>,</span><br><span class="line">        <span class="string">"Accept-Language"</span>: <span class="string">"zh-CN,zh;q=0.8,en;q=0.6"</span>,</span><br><span class="line">        <span class="string">"Cookie"</span>: cookie,</span><br><span class="line">        <span class="string">"Connection"</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">        <span class="string">"Host"</span>: <span class="string">"m.weibo.cn"</span>,</span><br><span class="line">        <span class="string">"Upgrade-Insecure-Requests"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Mobile Safari/537.36"</span>,</span><br><span class="line">        <span class="string">"X-Requested-With"</span>: <span class="string">"XMLHttpRequest"</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰¾åˆ°ç²‰ä¸é¡µé¢-1"><a href="#æ‰¾åˆ°ç²‰ä¸é¡µé¢-1" class="headerlink" title="æ‰¾åˆ°ç²‰ä¸é¡µé¢"></a>æ‰¾åˆ°ç²‰ä¸é¡µé¢</h2><p>æ¥ç€ï¼Œè¦æ‰¾åˆ°ç²‰ä¸é¡µé¢ã€‚</p><p>ç„¶è€Œï¼Œ<a href="http://m.weibo.cn/u/1788911247?uid=1788911247" target="_blank" rel="noopener">è°·å¤§ç™½è¯çš„é¡µé¢</a>ä¸Š<span style="color:red">æ²¡æœ‰å¯ä»¥è¿›å…¥çš„ç²‰ä¸é¡µé¢ï¼</span></p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7dc7f96b49.png" alt="4.png"></p><p>ä¸»é¡µä¸­<span style="color:red">ä¹Ÿæ‰¾ä¸åˆ°å¯ä»¥è¿›å…¥çš„ç²‰ä¸é¡µé¢ï¼</span></p><p>éš¾é“<a href="http://m.weibo.cn" target="_blank" rel="noopener">m.weibo.cn</a>ä¸èƒ½æŸ¥çœ‹ä»–äººçš„ç²‰ä¸ï¼Ÿä»ç°åœ¨çš„æƒ…å†µæ¥çœ‹æ–°æµªæ²¡æœ‰æä¾›æŸ¥çœ‹ä»–äººç²‰ä¸çš„é¡µé¢ã€‚</p><p>ä½†æ˜¯ï¼Œç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œæˆ‘å‘ç°æŸ¥çœ‹è‡ªå·±çš„ç²‰ä¸çš„é¡µé¢åœ°å€å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://m.weibo.cn/p/second?containerid=100505&#123;your_uid&#125;_-_FANS</span><br></pre></td></tr></table></figure><p>æˆ‘å°è¯•å°†å…¶å®ƒçš„uidä»£å…¥ä¸Šé¢çš„åœ°å€ï¼Œæœç„¶</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7ddc2ed700.png" alt="5.png"></p><p>è¿˜æ˜¯æœ‰æ–¹æ³•èƒ½å¤Ÿçœ‹åˆ°ä»–äººçš„ç²‰ä¸ã€‚</p><p>æ¥ç€å¯¹é¡µé¢è¿›è¡Œåˆ†æ</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7deb00678b.png" alt="6.png"></p><p>æˆ‘æ³¨æ„åˆ°è¿™é‡Œæœ‰ä¸¤ä¸ªç±»å‹æ˜¯<code>xhr</code>çš„æ–‡ä»¶</p><p>å…¶ä¸­ç¬¬ä¸€ä¸ªçš„åœ°å€æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://m.weibo.cn/container/getSecond?containerid=1005051669282904_-_FOLLOWERS</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªçš„åœ°å€æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://m.weibo.cn/container/getSecond?containerid=1005051669282904_-_FOLLOWERS&amp;page=2</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"ok"</span>: <span class="number">1</span>, </span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">""</span>, </span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"å…³æ³¨"</span>, </span><br><span class="line">    <span class="attr">"card_type_name"</span>: <span class="string">"å…³æ³¨"</span>, </span><br><span class="line">    <span class="attr">"count"</span>: <span class="number">116</span>, </span><br><span class="line">    <span class="attr">"maxPage"</span>: <span class="number">12</span>, </span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"pageuserlist"</span>, </span><br><span class="line">    <span class="attr">"cards"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"card_type"</span>: <span class="number">10</span>, </span><br><span class="line">            <span class="attr">"user"</span>: &#123;</span><br><span class="line">                <span class="attr">"id"</span>: <span class="number">2142168143</span>, </span><br><span class="line">                <span class="attr">"screen_name"</span>: <span class="string">"å…¨çƒå¥èº«ä¸­å¿ƒ"</span>, </span><br><span class="line">                <span class="attr">"profile_image_url"</span>: <span class="string">"http://tva3.sinaimg.cn/crop.0.2.1242.1242.180/7faee44fjw8f82cyhlfs0j20yi0ym40e.jpg"</span>, </span><br><span class="line">                <span class="attr">"profile_url"</span>: <span class="string">"http://m.weibo.cn/u/2142168143?uid=2142168143&amp;luicode=10000012&amp;lfid=1005051669282904_-_FOLLOWERS"</span>, </span><br><span class="line">                <span class="attr">"statuses_count"</span>: <span class="number">34184</span>, </span><br><span class="line">                <span class="attr">"verified"</span>: <span class="literal">true</span>, </span><br><span class="line">                <span class="attr">"verified_type"</span>: <span class="number">0</span>, </span><br><span class="line">                <span class="attr">"verified_type_ext"</span>: <span class="number">1</span>, </span><br><span class="line">                <span class="attr">"verified_reason"</span>: <span class="string">"ä¼˜ç§€å¥èº«èµ„è®¯åšä¸» "</span>, </span><br><span class="line">                <span class="attr">"description"</span>: <span class="string">"æœ€å¤§æœ€å…¨çš„å¥èº«å¾®åšï¼Œæ¥è‡ªä¸­æ—¥éŸ©æ¬§ç¾ç­‰æœ€çƒ­é—¨çš„å¥èº«æ•™ç¨‹ï¼ŒåŠ ä¸Šä¸“ä¸šçš„æ•™ç»ƒæŒ‡å¯¼ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ï¼å•†åŠ¡æ´½è°ˆQQï¼š2851661283ï¼Œé‚®ç®±ï¼švvstar@inmyshow.com"</span>, </span><br><span class="line">                <span class="attr">"gender"</span>: <span class="string">"f"</span>, </span><br><span class="line">                <span class="attr">"mbtype"</span>: <span class="number">12</span>, </span><br><span class="line">                <span class="attr">"urank"</span>: <span class="number">42</span>, </span><br><span class="line">                <span class="attr">"mbrank"</span>: <span class="number">6</span>, </span><br><span class="line">                <span class="attr">"follow_me"</span>: <span class="literal">false</span>, </span><br><span class="line">                <span class="attr">"following"</span>: <span class="literal">false</span>, </span><br><span class="line">                <span class="attr">"followers_count"</span>: <span class="number">11532193</span>, </span><br><span class="line">                <span class="attr">"follow_count"</span>: <span class="number">441</span>, </span><br><span class="line">                <span class="attr">"cover_image_phone"</span>: <span class="string">"http://ww3.sinaimg.cn/crop.0.0.640.640.640/7faee44fgw1f82ck0dmrmj20yi0yh0vb.jpg"</span>, </span><br><span class="line">                <span class="attr">"desc1"</span>: <span class="literal">null</span>, </span><br><span class="line">                <span class="attr">"desc2"</span>: <span class="literal">null</span></span><br><span class="line">            &#125;, </span><br><span class="line">            <span class="attr">"scheme"</span>: <span class="string">"http://m.weibo.cn/u/2142168143?uid=2142168143&amp;luicode=10000012&amp;lfid=1005051669282904_-_FOLLOWERS"</span>, </span><br><span class="line">            <span class="attr">"desc1"</span>: <span class="string">"æœ€å¤§æœ€å…¨çš„å¥èº«å¾®åšï¼Œæ¥è‡ªä¸­æ—¥éŸ©æ¬§ç¾ç­‰æœ€çƒ­é—¨çš„å¥èº«æ•™ç¨‹ï¼ŒåŠ ä¸Šä¸“ä¸šçš„æ•™ç»ƒæŒ‡å¯¼ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ï¼å•†åŠ¡æ´½è°ˆQQï¼š2851661283ï¼Œé‚®ç®±ï¼švvstar@inmyshow.com"</span>, </span><br><span class="line">            <span class="attr">"desc2"</span>: <span class="string">""</span></span><br><span class="line">        &#125;, </span><br><span class="line">        ...</span><br><span class="line">    ], </span><br><span class="line">    <span class="attr">"cardlistInfo"</span>: &#123;</span><br><span class="line">        <span class="attr">"containerid"</span>: <span class="string">"1005051669282904_-_FOLLOWERS"</span>, </span><br><span class="line">        <span class="attr">"title"</span>: <span class="literal">null</span>, </span><br><span class="line">        <span class="attr">"page"</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œcardså¯¹åº”çš„valueæ˜¯ä¸€ä¸ªlistï¼Œå…¶ä¸­çš„å¤šä¸ªdictä¿å­˜äº†followerçš„ä¿¡æ¯ã€‚</p><p>cardlistInfoå¯¹åº”çš„valueæ˜¯ä¸€ä¸ªdictï¼Œå…¶ä¸­pageå¯¹åº”çš„valueä¿å­˜äº†ä¸‹ä¸€é¡µçš„é¡µç ã€‚</p><p>æ¥ç€å‘ä¸‹æ»šåŠ¨é¡µé¢</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7e10d0a24f.png" alt="7.png"></p><p>å¯ä»¥çœ‹åˆ°å‡ºç°äº†æ›´å¤šçš„<code>xhr</code>æ–‡ä»¶ã€‚</p><p>è‡³æ­¤ï¼Œå¯ä»¥å¾—åˆ°è·å–æŸäººç²‰ä¸çš„æ­¥éª¤ï¼š</p><ol><li>è®¿é—®<code>http://m.weibo.cn/container/getSecond?containerid=100505{uid}_-_FOLLOWERS</code>é¡µé¢</li><li>ä»å½“å‰é¡µé¢ä¸­è§£æè‹¥å¹²ä¸ªç”¨æˆ·ä¿¡æ¯ï¼›</li><li>åœ¨å½“å‰é¡µé¢æ‰¾åˆ°ä¸‹ä¸€é¡µçš„åœ°å€å¹¶è®¿é—®ï¼›</li><li>é‡å¤æ­¥éª¤2-3ç›´åˆ°æ²¡æœ‰æ›´å¤šçš„ç”¨æˆ·ä¿¡æ¯ã€‚</li></ol><p>è‡³æ­¤ï¼Œå¯ä»¥å®¹æ˜“åœ°å†™å‡ºè·å–æŸäººç²‰ä¸çš„ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_followers</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    è§£æå…³æ³¨è€…ä¿¡æ¯</span></span><br><span class="line"><span class="string">    :param response:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    logging.debug(<span class="string">'parse_followers'</span>)</span><br><span class="line">    jsonObj = json.loads(response.text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æcardsä¸­æœ‹å‹ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cards = jsonObj.get(<span class="string">'cards'</span>)</span><br><span class="line">        <span class="keyword">for</span> card <span class="keyword">in</span> cards:</span><br><span class="line">            uid = card.get(<span class="string">'user'</span>).get(<span class="string">'id'</span>)</span><br><span class="line">            logging.info(card.get(<span class="string">'user'</span>).get(<span class="string">'screen_name'</span>))</span><br><span class="line">            <span class="keyword">yield</span> Request(</span><br><span class="line">                url=<span class="string">'&#123;0&#125;?containerid=230283&#123;1&#125;'</span>.format(self.getIndex, uid),</span><br><span class="line">                headers=self.headers,</span><br><span class="line">                callback=self.parse_person</span><br><span class="line">            )</span><br><span class="line">    <span class="comment"># æ²¡æœ‰ç²‰ä¸</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        msg = jsonObj[<span class="string">'msg'</span>]</span><br><span class="line">        print(msg)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æä¸‹ä¸€é¡µä¸­çš„æœ‹å‹ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        next_page = jsonObj[<span class="string">'cardlistInfo'</span>][<span class="string">'page'</span>]</span><br><span class="line">        <span class="keyword">yield</span> Request(</span><br><span class="line">            url=<span class="string">'&#123;0&#125;?containerid=100505&#123;1&#125;_-_FOLLOWERS&amp;page=&#123;2&#125;'</span>.format(self.getSecond, self.uid, next_page),</span><br><span class="line">            headers=self.headers,</span><br><span class="line">            callback=self.parse_followers</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'æ²¡æœ‰äº†'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><h2 id="æ‰¾åˆ°ç”¨æˆ·è¯¦ç»†èµ„æ–™é¡µé¢"><a href="#æ‰¾åˆ°ç”¨æˆ·è¯¦ç»†èµ„æ–™é¡µé¢" class="headerlink" title="æ‰¾åˆ°ç”¨æˆ·è¯¦ç»†èµ„æ–™é¡µé¢"></a>æ‰¾åˆ°ç”¨æˆ·è¯¦ç»†èµ„æ–™é¡µé¢</h2><p>æˆ‘æ„Ÿå…´è¶£çš„ç”¨æˆ·èµ„æ–™åœ¨ç”¨æˆ·çš„<a href="http://m.weibo.cn/p/index?containerid=2302831195054531_-_INFO" target="_blank" rel="noopener">ä¸ªäººä¸»é¡µ</a>ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7e2e9b3efd.png" alt="8.png"></p><p>åœ¨Developer Toolsä¸­å¯ä»¥çœ‹åˆ°</p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7e54113335.png" alt="9.png"></p><p>æœ‰ä¸€ä¸ª<code>xhr</code>æ–‡ä»¶ï¼Œåœ°å€æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://m.weibo.cn/container/getIndex?containerid=2302831195054531_-_INFO</span><br></pre></td></tr></table></figure><p>å†…å®¹æ˜¯</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"cardlistInfo"</span>: &#123;</span><br><span class="line">        <span class="attr">"v_p"</span>: <span class="string">"42"</span>, </span><br><span class="line">        <span class="attr">"cardlist_title"</span>: <span class="string">"ä¸ªäººä¸»é¡µ"</span>, </span><br><span class="line">        <span class="attr">"desc"</span>: <span class="string">""</span>, </span><br><span class="line">        <span class="attr">"show_style"</span>: <span class="number">1</span>, </span><br><span class="line">        <span class="attr">"containerid"</span>: <span class="string">"2302831195054531_-_INFO"</span>, </span><br><span class="line">        <span class="attr">"cardlist_menus"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"button_menus_refresh"</span>, </span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"åˆ·æ–°"</span></span><br><span class="line">            &#125;, </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"gohome"</span>, </span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"è¿”å›é¦–é¡µ"</span>, </span><br><span class="line">                <span class="attr">"params"</span>: &#123;</span><br><span class="line">                    <span class="attr">"scheme"</span>: <span class="string">"sinaweibo://gotohome"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ], </span><br><span class="line">        <span class="attr">"page"</span>: <span class="literal">null</span></span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="attr">"cards"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"card_type"</span>: <span class="number">11</span>, </span><br><span class="line">            <span class="attr">"show_type"</span>: <span class="number">2</span>, </span><br><span class="line">            <span class="attr">"card_group"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_name"</span>: <span class="string">"æ˜µç§°"</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">"åšç‰©æ‚å¿—"</span>, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_type"</span>: <span class="string">"set_remark"</span>, </span><br><span class="line">                    <span class="attr">"uid"</span>: <span class="string">"1195054531"</span>, </span><br><span class="line">                    <span class="attr">"item_name"</span>: <span class="string">"Tap to set alias"</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">""</span>, </span><br><span class="line">                    <span class="attr">"display_arrow"</span>: <span class="number">1</span>, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">"åšç‰©æ‚å¿—å®˜æ–¹å¾®åš"</span>, </span><br><span class="line">                    <span class="attr">"item_type"</span>: <span class="string">"verify_blue"</span>, </span><br><span class="line">                    <span class="attr">"itemid"</span>: <span class="string">"2302831195054531_-_WEIBO_INDEX_PROFILE_VERFIED_CARD"</span>, </span><br><span class="line">                    <span class="attr">"actionlog"</span>: &#123;</span><br><span class="line">                        <span class="attr">"act_code"</span>: <span class="string">"594"</span>, </span><br><span class="line">                        <span class="attr">"uicode"</span>: <span class="string">"10000198"</span>, </span><br><span class="line">                        <span class="attr">"oid"</span>: <span class="string">"http://verified.weibo.com/verify"</span>, </span><br><span class="line">                        <span class="attr">"fid"</span>: <span class="string">"2302831195054531"</span>, </span><br><span class="line">                        <span class="attr">"cardid"</span>: <span class="string">"230283_-_WEIBO_INDEX_PROFILE_VERFIED_CARD"</span>, </span><br><span class="line">                        <span class="attr">"ext"</span>: <span class="string">"uid:1195054531|ptype:0"</span></span><br><span class="line">                    &#125;, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_name"</span>: <span class="string">"æ ‡ç­¾"</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">"æç¬‘"</span>, </span><br><span class="line">                    <span class="attr">"display_arrow"</span>: <span class="number">0</span>, </span><br><span class="line">                    <span class="attr">"scheme"</span>: <span class="string">""</span>, </span><br><span class="line">                    <span class="attr">"actionlog"</span>: &#123;</span><br><span class="line">                        <span class="attr">"act_code"</span>: <span class="string">"594"</span>, </span><br><span class="line">                        <span class="attr">"uicode"</span>: <span class="string">"10000198"</span>, </span><br><span class="line">                        <span class="attr">"oid"</span>: <span class="string">""</span>, </span><br><span class="line">                        <span class="attr">"fid"</span>: <span class="string">"2302831195054531"</span>, </span><br><span class="line">                        <span class="attr">"cardid"</span>: <span class="string">"230283_-_WEIBO_INDEX_PROFILE_CTAG"</span>, </span><br><span class="line">                        <span class="attr">"ext"</span>: <span class="string">"uid:1195054531|ptype:0"</span></span><br><span class="line">                    &#125;, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_name"</span>: <span class="string">"æ‰€åœ¨åœ°"</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">"åŒ—äº¬ æœé˜³åŒº"</span>, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"card_type"</span>: <span class="number">41</span>, </span><br><span class="line">                    <span class="attr">"item_name"</span>: <span class="string">"ç®€ä»‹"</span>, </span><br><span class="line">                    <span class="attr">"item_content"</span>: <span class="string">"æˆ‘æ˜¯åšç‰©å­¦ç§‘æ™®æ‚å¿—ï¼Œä¹°æ‚å¿—å»æŠ¥åˆŠäº­ã€é‚®å±€ã€å¤©çŒ«â€œä¸­å›½å›½å®¶åœ°ç†æ——èˆ°åº—â€ï¼Œä¹°åšç‰©æ–‡åˆ›å»æ·˜å®â€œåšç‰©å°é¦†â€"</span>, </span><br><span class="line">                    <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">                &#125;</span><br><span class="line">            ], </span><br><span class="line">            <span class="attr">"openurl"</span>: <span class="string">""</span></span><br><span class="line">        &#125;, </span><br><span class="line">        ...</span><br><span class="line">    ], </span><br><span class="line">    <span class="attr">"ok"</span>: <span class="number">1</span>, </span><br><span class="line">    <span class="attr">"seeLevel"</span>: <span class="number">3</span>, </span><br><span class="line">    <span class="attr">"showAppTips"</span>: <span class="number">0</span>, </span><br><span class="line">    <span class="attr">"scheme"</span>: <span class="string">"sinaweibo://cardlist?containerid=2302831195054531_-_INFO&amp;luicode=10000011&amp;lfid=2302831195054531_-_INFO&amp;featurecode="</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ„Ÿå…´è¶£çš„ä¿¡æ¯å¯ä»¥ä»cardsä¸­è§£æå‡ºæ¥ã€‚</p><p>è‡³æ­¤ï¼Œå¯ä»¥å¾—åˆ°è·å–æŸäººè¯¦ç»†ä¿¡æ¯çš„æ­¥éª¤ï¼š</p><ol><li>å–å¾—ç²‰ä¸uidï¼Œè®¿é—®<code>http://m.weibo.cn/container/getIndex?containerid=230283{uid}_-_INFO</code>é¡µé¢ï¼›</li><li>åœ¨å½“å‰é¡µé¢è§£æcardsä¸­æ„Ÿå…´è¶£çš„å†…å®¹ï¼›</li><li>é‡å¤æ­¥éª¤1-2ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šç²‰ä¸ã€‚</li></ol><p>è‡³æ­¤ï¼Œå¯ä»¥å®¹æ˜“åœ°å†™å‡ºè·å–æŸäººè¯¦ç»†ä¿¡æ¯çš„ç¨‹åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_person</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    è§£æä¸ªäººä¿¡æ¯</span></span><br><span class="line"><span class="string">    :param response:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    jsonObj = json.loads(response.text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–ä¿¡æ¯å‡ºé”™</span></span><br><span class="line">    <span class="keyword">if</span> jsonObj.get(<span class="string">'msg'</span>):</span><br><span class="line">        <span class="comment"># å†æ¬¡è°ƒç”¨parse_person</span></span><br><span class="line">        <span class="keyword">yield</span> Request(</span><br><span class="line">            url=response.url,</span><br><span class="line">            headers=self.headers,</span><br><span class="line">            callback=self.parse_person</span><br><span class="line">        )</span><br><span class="line">    item = WeiboItem()</span><br><span class="line">    <span class="comment"># ä»response.urlä¸­æˆªå–uid</span></span><br><span class="line">    item[<span class="string">'uid'</span>] = response.url.split(<span class="string">'_'</span>)[<span class="number">0</span>].split(<span class="string">'='</span>)[<span class="number">1</span>][<span class="number">6</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># éå†cards</span></span><br><span class="line">    cards = jsonObj.get(<span class="string">'cards'</span>) <span class="keyword">or</span> []</span><br><span class="line">    <span class="keyword">for</span> something <span class="keyword">in</span> cards:</span><br><span class="line">        card_group = something.get(<span class="string">'card_group'</span>) <span class="keyword">or</span> []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†card_groupï¼Œé€é¡¹å¯»æ‰¾æ„Ÿå…´è¶£çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">for</span> card <span class="keyword">in</span> card_group:</span><br><span class="line">            item_name = card.get(<span class="string">'item_name'</span>)</span><br><span class="line">            <span class="comment"># logging.debug(item_name)</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">'æ˜µç§°'</span> == item_name:</span><br><span class="line">                item[<span class="string">'name'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'æ€§åˆ«'</span> == item_name:</span><br><span class="line">                item[<span class="string">'gender'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'æ‰€åœ¨åœ°'</span> == item_name:</span><br><span class="line">                item[<span class="string">'location'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'ç®€ä»‹'</span> == item_name:</span><br><span class="line">                item[<span class="string">'intro'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'æ³¨å†Œæ—¶é—´'</span> == item_name:</span><br><span class="line">                item[<span class="string">'signin'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'å­¦æ ¡'</span> == item_name:</span><br><span class="line">                item[<span class="string">'school'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'å…¬å¸'</span> == item_name:</span><br><span class="line">                item[<span class="string">'company'</span>] = card.get(<span class="string">'item_content'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure><p><span style="color:red">ç”±äºå¾®åšé™åˆ¶ï¼Œæ­¤æ–¹æ³•åªèƒ½è·å–100ä¸ªå·¦å³çš„ç²‰ä¸ä¿¡æ¯</span></p><p><img src="https://ooo.0o0.ooo/2017/03/14/58c7ff1a0bb63.png" alt="10.png"></p><h1 id="æœ‰å¾…æ”¹è¿›"><a href="#æœ‰å¾…æ”¹è¿›" class="headerlink" title="æœ‰å¾…æ”¹è¿›"></a>æœ‰å¾…æ”¹è¿›</h1><ul><li style="list-style: none"><input type="checkbox"> å®ç°æ¨¡æ‹Ÿç™»å½•</li><li style="list-style: none"><input type="checkbox"> æ‰¾åˆ°èƒ½è·å–æ›´å¤šç²‰ä¸çš„æ–¹æ³•</li><li style="list-style: none"><input type="checkbox"> å°è¯•ä½¿ç”¨IPæ± </li></ul>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> scrapy </tag>
            
            <tag> å¾®åš </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è®°å¼‚æˆ–çš„ç”¨æ³•</title>
      <link href="/2017/02/18/%E8%AE%B0%E5%BC%82%E6%88%96%E7%9A%84%E7%94%A8%E6%B3%95/"/>
      <url>/2017/02/18/%E8%AE%B0%E5%BC%82%E6%88%96%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>LeetCodeä¸Š<a href="https://leetcode.com/problems/single-number" target="_blank" rel="noopener">æœ‰é“é¢˜</a>ï¼Œè¦æ±‚æ‰¾å‡ºä¸€ä¸ªå…¶å®ƒæ‰€æœ‰å…ƒç´ éƒ½å‡ºç°ä¸¤æ¬¡çš„æ•´æ•°æ•°ç»„ä¸­ï¼Œå”¯ä¸€çš„åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><a id="more"></a><h1 id="æˆ‘çš„æƒ³æ³•"><a href="#æˆ‘çš„æƒ³æ³•" class="headerlink" title="æˆ‘çš„æƒ³æ³•"></a>æˆ‘çš„æƒ³æ³•</h1><p>æˆ‘æœ¬æ¥å‡†å¤‡å°†æ‰€æœ‰å‡ºç°è¿‡çš„å…ƒç´ çš„å€¼è®°ä¸ºindexï¼Œåœ¨numsæ•°ç»„ä¸­å°†nums[index]æ·»ä¸Šè´Ÿå·ã€‚éå†ä¸€æ¬¡æ•°ç»„ä¹‹ååªç”¨æŸ¥çœ‹è·ŸåŸæ•°ç»„ç¬¦å·ä¸ä¸€è‡´çš„æ•°ï¼Œè¿”å›åºå·ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">singleNumber</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        nums = [<span class="number">0</span>] + nums</span><br><span class="line">        old_nums = list(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            index = abs(nums[i])</span><br><span class="line">            nums[index] = -(nums[index])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">if</span> (old_nums[i] - nums[i]) != <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> i</span><br></pre></td></tr></table></figure><p>æµ‹è¯•äº†ä¸€ä¸‹æˆ‘å‘ç°è¿™ä¸ªæ–¹æ³•ä¸èƒ½æ‰¾åˆ°&lt;0çš„å…ƒç´  = =</p><h1 id="æ­£ç¡®çš„è§£æ³•"><a href="#æ­£ç¡®çš„è§£æ³•" class="headerlink" title="æ­£ç¡®çš„è§£æ³•"></a>æ­£ç¡®çš„è§£æ³•</h1><p>ç‚¹å¼€discussæˆ‘å‘ç°äº†ä¸€ä¸ªä½¿ç”¨å¼‚æˆ–çš„ç®—æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">singleNumber</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            result ^= num</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>å¼‚æˆ–çš„æ€§è´¨ä¸­æœ‰ä»¥ä¸‹ä¸‰æ¡ï¼š</p><blockquote><p>äº¤æ¢å¾‹ï¼šA âŠ• B = B âŠ• A</p><p>å½’é›¶å¾‹ï¼šX âŠ• X = 0</p><p>æ’ç­‰å¾‹ï¼šX âŠ• 0 = X</p></blockquote><p>æ‰€ä»¥å¯¹äºä¸€ä¸ªæ•°ç»„[2,1,4,5,2,4,1]ï¼Œä¸Šé¢çš„ç®—æ³•è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(0^2^1^4^5^2^4^1) =&gt; ((2^2)^(1^1)^(4^4)^(5)) =&gt; (0^0^0^5) =&gt; 5</span><br></pre></td></tr></table></figure><p>å­¦ç¦»æ•£æ•°å­¦çš„æ—¶å€™åªèƒŒäº†å‡ ä¸ªå®šå¾‹ï¼Œç¡®æ²¡çœŸæ­£æ„è¯†åˆ°å¼‚æˆ–çš„ç¥å¥‡ä¹‹å¤„ã€‚</p><h1 id="å¼‚æˆ–çš„å…¶å®ƒåº”ç”¨"><a href="#å¼‚æˆ–çš„å…¶å®ƒåº”ç”¨" class="headerlink" title="å¼‚æˆ–çš„å…¶å®ƒåº”ç”¨"></a>å¼‚æˆ–çš„å…¶å®ƒåº”ç”¨</h1><h2 id="å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼"><a href="#å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼" class="headerlink" title="å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼"></a>å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼</h2><p>åˆ¤æ–­<code>a ^ b == 0</code></p><h2 id="ç¿»è½¬äºŒè¿›åˆ¶çš„ç‰¹å®šä½"><a href="#ç¿»è½¬äºŒè¿›åˆ¶çš„ç‰¹å®šä½" class="headerlink" title="ç¿»è½¬äºŒè¿›åˆ¶çš„ç‰¹å®šä½"></a>ç¿»è½¬äºŒè¿›åˆ¶çš„ç‰¹å®šä½</h2><p>ç”±äºå¼‚æˆ–çš„æ€§è´¨ï¼Œä½¿å¾—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> ^ <span class="number">1</span> = <span class="number">1</span></span><br><span class="line"><span class="number">1</span> ^ <span class="number">1</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ•°<code>10100001</code>ï¼Œæƒ³è¦ç¿»è½¬å®ƒçš„ç¬¬6ä½ï¼Œå¯ä»¥å¦‚æ­¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10100001</span></span><br><span class="line">mask = <span class="number">1</span> &lt;&lt; <span class="number">6</span></span><br><span class="line">a = a ^ mask</span><br></pre></td></tr></table></figure><h2 id="å¥‡å¶æ ¡éªŒ"><a href="#å¥‡å¶æ ¡éªŒ" class="headerlink" title="å¥‡å¶æ ¡éªŒ"></a>å¥‡å¶æ ¡éªŒ</h2><p>å°†ä¸€ä¸ªäºŒè¿›åˆ¶æ•°<code>10100001</code>é€ä½å¼‚æˆ–ï¼Œç»“æœä¸º<code>1</code>å°±åŒ…å«å¥‡æ•°ä¸ª1ï¼Œç»“æœä¸º<code>0</code>å°±åŒ…å«å¶æ•°ä¸ª1ã€‚</p><p>è§£é‡Šï¼š</p><p>å¯¹äºå¼å­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> ^ <span class="number">0</span> ^ <span class="number">1</span> ^ <span class="number">0</span> ^ <span class="number">0</span> ^ <span class="number">0</span> ^ <span class="number">0</span> ^ <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºå½’é›¶å¾‹ï¼Œå¯ä»¥æ¶ˆæ‰æ‰€æœ‰çš„0ã€‚</p><p>å› ä¸º<code>1 ^ 1 = 0</code>ï¼Œå¯ä»¥æ¶ˆæ‰æˆå¯¹çš„<code>1</code>ã€‚</p><p>è‹¥è¿˜æœ‰å‰©ä¸‹çš„<code>1</code>ï¼Œå¼å­çš„å€¼ä¸º1ï¼›è‹¥æ²¡æœ‰å‰©ä¸‹çš„<code>1</code>ï¼Œå¼å­çš„å€¼ä¸º0ã€‚</p><h2 id="æ— è¾…åŠ©ç©ºé—´äº¤æ¢ä¸¤ä¸ªå€¼"><a href="#æ— è¾…åŠ©ç©ºé—´äº¤æ¢ä¸¤ä¸ªå€¼" class="headerlink" title="æ— è¾…åŠ©ç©ºé—´äº¤æ¢ä¸¤ä¸ªå€¼"></a>æ— è¾…åŠ©ç©ºé—´äº¤æ¢ä¸¤ä¸ªå€¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = a ^ b</span><br><span class="line">b = a ^ b<span class="comment"># b = a ^ b ^ b = a ^ 0 = a</span></span><br><span class="line">a = a ^ b<span class="comment"># a = a ^ b ^ a = b ^ 0 = b</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> xor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>FLaskæ‰©å±•â€”â€”Flask-SQLAlchemy</title>
      <link href="/2017/02/16/FLask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-SQLAlchemy/"/>
      <url>/2017/02/16/FLask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-SQLAlchemy/</url>
      <content type="html"><![CDATA[<p>Flask-SQLAlchemy æ˜¯ä¸€ä¸ª Flask æ‰©å±•ï¼Œç®€åŒ–äº†åœ¨ Flask ç¨‹åºä¸­ä½¿ç”¨ SQLAlchemy çš„æ“ä½œã€‚ </p><p>SQLAlchemy æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“æ¡†æ¶ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“åå°ã€‚ SQLAlchemy æ<br>ä¾›äº†é«˜å±‚ ORMï¼Œä¹Ÿæä¾›äº†ä½¿ç”¨æ•°æ®åº“åŸç”Ÿ SQL çš„ä½å±‚åŠŸèƒ½ã€‚ </p><a id="more"></a><h1 id="ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“"><a href="#ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“"></a>ä½¿ç”¨Flask-SQLAlchemyç®¡ç†æ•°æ®åº“</h1><p>æœ€æµè¡Œçš„æ•°æ®åº“å¼•æ“é‡‡ç”¨çš„æ•°æ®åº“URLæ ¼å¼å¦‚è¡¨æ‰€ç¤ºï¼š</p><blockquote><p><a href="http://docs.sqlalchemy.org/en/latest/core/engines.html" target="_blank" rel="noopener">Flask-SQLAlchemyæ•°æ®åº“URL</a></p><table><thead><tr><th>æ•°æ®åº“å¼•æ“</th><th>URL</th></tr></thead><tbody><tr><td>MySQL</td><td>mysql://username:password@hostname/database</td></tr><tr><td>Postgres</td><td>postgresql://username:password@hostname/database</td></tr><tr><td>Oracle</td><td>oracle://username:password@hostname/database</td></tr><tr><td>SQL Server</td><td>mssql+pyodbc://username:password@database</td></tr><tr><td>SQLite (Unix)</td><td>sqlite:////absolute/path/to/database</td></tr><tr><td>SQLite (Windows)</td><td>sqlite:///c:/absolute/path/to/database</td></tr></tbody></table></blockquote><p>ç¨‹åºä½¿ç”¨çš„æ•°æ®åº“ URL å¿…é¡»ä¿å­˜åˆ° Flask é…ç½®å¯¹è±¡çš„ SQLALCHEMY_DATABASE_URI é”®ä¸­ã€‚ </p><p>é…ç½®å¯¹è±¡çš„SQLALCHEMY_COMMIT_ON_TEARDOWN é”®ï¼Œå°†å…¶è®¾ä¸º Trueæ—¶ï¼Œæ¯æ¬¡è¯·æ±‚ç»“æŸåéƒ½ä¼šè‡ªåŠ¨æäº¤æ•°æ®åº“ä¸­çš„å˜åŠ¨ã€‚ </p><h1 id="å®šä¹‰æ¨¡å‹"><a href="#å®šä¹‰æ¨¡å‹" class="headerlink" title="å®šä¹‰æ¨¡å‹"></a>å®šä¹‰æ¨¡å‹</h1><p>åœ¨ORMä¸­ï¼Œæ¨¡å‹ä¸€èˆ¬æ˜¯ä¸€ä¸ªPythonç±»ï¼Œå…¶ä¸­çš„å±æ€§å¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„åˆ—ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> learnFlask <span class="keyword">import</span> db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'roles'</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">64</span>), unique=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;Role %r&gt;'</span> % self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'users'</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">64</span>), unique=<span class="keyword">True</span>, index=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;User %r&gt;'</span> % self.username</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å®šä¹‰<code>__tablename__</code>ï¼ŒFlask-SQLAlchemyä¼šä½¿ç”¨ä¸€ä¸ªé»˜è®¤åå­—ï¼Œä½†é»˜è®¤çš„è¡¨æ˜æ²¡æœ‰éµå®ˆä½¿ç”¨å¤æ•°å½¢å¼è¿›è¡Œå‘½åçš„çº¦å®šã€‚</p><blockquote><p>æœ€å¸¸ç”¨çš„SQLAlchemyåˆ—ç±»å‹</p><table><thead><tr><th style="text-align:left">ç±»å‹å</th><th style="text-align:left">Pythonç±»å‹</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">Integer</td><td style="text-align:left">int</td><td style="text-align:left">æ™®é€šæ•´æ•°ï¼Œä¸€èˆ¬æ˜¯ 32 ä½</td></tr><tr><td style="text-align:left">SmallInteger</td><td style="text-align:left">int</td><td style="text-align:left">å–å€¼èŒƒå›´å°çš„æ•´æ•°ï¼Œä¸€èˆ¬æ˜¯ 16 ä½</td></tr><tr><td style="text-align:left">BigInteger</td><td style="text-align:left">int æˆ– long</td><td style="text-align:left">ä¸é™åˆ¶ç²¾åº¦çš„æ•´æ•°</td></tr><tr><td style="text-align:left">Float</td><td style="text-align:left">float</td><td style="text-align:left">æµ®ç‚¹æ•°</td></tr><tr><td style="text-align:left">Numeric</td><td style="text-align:left">decimal.Decimal</td><td style="text-align:left">å®šç‚¹æ•°</td></tr><tr><td style="text-align:left">String</td><td style="text-align:left">str</td><td style="text-align:left">å˜é•¿å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left">Text</td><td style="text-align:left">str</td><td style="text-align:left">å˜é•¿å­—ç¬¦ä¸²ï¼Œå¯¹è¾ƒé•¿æˆ–ä¸é™é•¿åº¦çš„å­—ç¬¦ä¸²åšäº†ä¼˜åŒ–</td></tr><tr><td style="text-align:left">Unicode</td><td style="text-align:left">unicode</td><td style="text-align:left">å˜é•¿ Unicode å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left">UnicodeText</td><td style="text-align:left">unicode</td><td style="text-align:left">å˜é•¿ Unicode å­—ç¬¦ä¸²ï¼Œå¯¹è¾ƒé•¿æˆ–ä¸é™é•¿åº¦çš„å­—ç¬¦ä¸²åšäº†ä¼˜åŒ–</td></tr><tr><td style="text-align:left">Boolean</td><td style="text-align:left">bool</td><td style="text-align:left">å¸ƒå°”å€¼</td></tr><tr><td style="text-align:left">Date</td><td style="text-align:left">datetime.date</td><td style="text-align:left">æ—¥æœŸ</td></tr><tr><td style="text-align:left">Time</td><td style="text-align:left">datetime.time</td><td style="text-align:left">æ—¶é—´</td></tr><tr><td style="text-align:left">DateTime</td><td style="text-align:left">datetime.datetime</td><td style="text-align:left">æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td style="text-align:left">Interval</td><td style="text-align:left">datetime.timedelta</td><td style="text-align:left">æ—¶é—´é—´éš”</td></tr><tr><td style="text-align:left">Enum</td><td style="text-align:left">str</td><td style="text-align:left">ä¸€ç»„å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left">PickleType</td><td style="text-align:left">ä»»ä½• Python å¯¹è±¡</td><td style="text-align:left">è‡ªåŠ¨ä½¿ç”¨ Pickle åºåˆ—åŒ–</td></tr><tr><td style="text-align:left">LargeBinary</td><td style="text-align:left">str</td><td style="text-align:left">äºŒè¿›åˆ¶æ–‡ä»¶</td></tr></tbody></table><p>æœ€å¸¸ä½¿ç”¨çš„SQLAlchemyåˆ—é€‰é¡¹</p><table><thead><tr><th style="text-align:left">é€‰é¡¹å</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">primary_key</td><td style="text-align:left">å¦‚æœè®¾ä¸º Trueï¼Œè¿™åˆ—å°±æ˜¯è¡¨çš„ä¸»é”®</td></tr><tr><td style="text-align:left">unique</td><td style="text-align:left">å¦‚æœè®¾ä¸º Trueï¼Œè¿™åˆ—ä¸å…è®¸å‡ºç°é‡å¤çš„å€¼</td></tr><tr><td style="text-align:left">index</td><td style="text-align:left">å¦‚æœè®¾ä¸º Trueï¼Œä¸ºè¿™åˆ—åˆ›å»ºç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡</td></tr><tr><td style="text-align:left">nullable</td><td style="text-align:left">å¦‚æœè®¾ä¸º Trueï¼Œè¿™åˆ—å…è®¸ä½¿ç”¨ç©ºå€¼ï¼›å¦‚æœè®¾ä¸º Falseï¼Œè¿™åˆ—ä¸å…è®¸ä½¿ç”¨ç©ºå€¼</td></tr><tr><td style="text-align:left">default</td><td style="text-align:left">ä¸ºè¿™åˆ—å®šä¹‰é»˜è®¤å€¼</td></tr></tbody></table></blockquote><h1 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h1><h2 id="ä¸€å¯¹å¤šå…³ç³»"><a href="#ä¸€å¯¹å¤šå…³ç³»" class="headerlink" title="ä¸€å¯¹å¤šå…³ç³»"></a>ä¸€å¯¹å¤šå…³ç³»</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span><span class="params">(db.Model)</span>:</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line">users = db.relationship(<span class="string">'User'</span>, backref=<span class="string">'role'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line">role_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'roles.id'</span>))</span><br></pre></td></tr></table></figure><blockquote><p>å¸¸ç”¨çš„SQLAlchemyå…³ç³»é€‰é¡¹</p><table><thead><tr><th style="text-align:left">é€‰é¡¹å</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">backref</td><td style="text-align:left">åœ¨å…³ç³»çš„å¦ä¸€ä¸ªæ¨¡å‹ä¸­æ·»åŠ åå‘å¼•ç”¨</td></tr><tr><td style="text-align:left">primaryjoin</td><td style="text-align:left">æ˜ç¡®æŒ‡å®šä¸¤ä¸ªæ¨¡å‹ä¹‹é—´ä½¿ç”¨çš„è”ç»“æ¡ä»¶ã€‚åªåœ¨æ¨¡æ£±ä¸¤å¯çš„å…³ç³»ä¸­éœ€è¦æŒ‡å®š</td></tr><tr><td style="text-align:left">lazy</td><td style="text-align:left">æŒ‡å®šå¦‚ä½•åŠ è½½ç›¸å…³è®°å½•ã€‚å¯é€‰å€¼æœ‰ selectï¼ˆé¦–æ¬¡è®¿é—®æ—¶æŒ‰éœ€åŠ è½½ï¼‰ã€immediateï¼ˆæºå¯¹è±¡åŠ è½½åå°±åŠ è½½ï¼‰ã€ joinedï¼ˆåŠ è½½è®°å½•ï¼Œä½†ä½¿ç”¨è”ç»“ï¼‰ã€ subqueryï¼ˆç«‹å³åŠ è½½ï¼Œä½†ä½¿ç”¨å­æŸ¥è¯¢ï¼‰ï¼Œnoloadï¼ˆæ°¸ä¸åŠ è½½ï¼‰å’Œ dynamicï¼ˆä¸åŠ è½½è®°å½•ï¼Œä½†æä¾›åŠ è½½è®°å½•çš„æŸ¥è¯¢ï¼‰</td></tr><tr><td style="text-align:left">uselist</td><td style="text-align:left">å¦‚æœè®¾ä¸º Falesï¼Œä¸ä½¿ç”¨åˆ—è¡¨ï¼Œè€Œä½¿ç”¨æ ‡é‡å€¼</td></tr><tr><td style="text-align:left">order_by</td><td style="text-align:left">æŒ‡å®šå…³ç³»ä¸­è®°å½•çš„æ’åºæ–¹å¼</td></tr><tr><td style="text-align:left">secondary</td><td style="text-align:left">æŒ‡å®šå¤šå¯¹å¤šå…³ç³»ä¸­å…³ç³»è¡¨çš„åå­—</td></tr><tr><td style="text-align:left">secondaryjoin</td><td style="text-align:left">SQLAlchemy æ— æ³•è‡ªè¡Œå†³å®šæ—¶ï¼ŒæŒ‡å®šå¤šå¯¹å¤šå…³ç³»ä¸­çš„äºŒçº§è”ç»“æ¡ä»¶</td></tr></tbody></table></blockquote><h1 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h1><h2 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.drop_all()</span><br><span class="line">db.create_all()</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥è¡Œ"><a href="#æ’å…¥è¡Œ" class="headerlink" title="æ’å…¥è¡Œ"></a>æ’å…¥è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> hello <span class="keyword">import</span> Role, User</span><br><span class="line">admin_role = Role(name=<span class="string">'Admin'</span>)</span><br><span class="line">mod_role = Role(name=<span class="string">'Moderator'</span>)</span><br><span class="line">user_role = Role(name=<span class="string">'User'</span>)</span><br><span class="line">user_john = User(username=<span class="string">'john'</span>, role=admin_role)</span><br><span class="line">user_susan = User(username=<span class="string">'susan'</span>, role=user_role)</span><br><span class="line">user_david = User(username=<span class="string">'david'</span>, role=user_role)</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ•°æ®åº“ä¼šè¯ç®¡ç†å¯¹æ•°æ®åº“æ‰€åšçš„æ”¹åŠ¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.session.add(admin_role)</span><br><span class="line">db.session.add(mod_role)</span><br><span class="line">db.session.add(user_role)</span><br><span class="line">db.session.add(user_john)</span><br><span class="line">db.session.add(user_susan)</span><br><span class="line">db.session.add(user_david)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æŠŠå¯¹è±¡å†™å…¥æ•°æ®åº“ï¼Œæˆ‘ä»¬è¦è°ƒç”¨<code>commit()</code>æ–¹æ³•æäº¤ä¼šè¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¡Œ"><a href="#ä¿®æ”¹è¡Œ" class="headerlink" title="ä¿®æ”¹è¡Œ"></a>ä¿®æ”¹è¡Œ</h2><p>è°ƒç”¨<code>add()</code>æ–¹æ³•æ›´æ–°æ¨¡å‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">admin_role.name = <span class="string">'Administrator'</span></span><br><span class="line">db.session.add(admin_role)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¡Œ"><a href="#åˆ é™¤è¡Œ" class="headerlink" title="åˆ é™¤è¡Œ"></a>åˆ é™¤è¡Œ</h2><p>è°ƒç”¨<code>delete()</code>æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.session.delete(mod_role)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢è¡Œ"><a href="#æŸ¥è¯¢è¡Œ" class="headerlink" title="æŸ¥è¯¢è¡Œ"></a>æŸ¥è¯¢è¡Œ</h2><h3 id="å–å›å¯¹åº”è¡¨ä¸­æ‰€æœ‰çš„è®°å½•"><a href="#å–å›å¯¹åº”è¡¨ä¸­æ‰€æœ‰çš„è®°å½•" class="headerlink" title="å–å›å¯¹åº”è¡¨ä¸­æ‰€æœ‰çš„è®°å½•"></a>å–å›å¯¹åº”è¡¨ä¸­æ‰€æœ‰çš„è®°å½•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Role.query.all()</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿‡æ»¤å™¨å¯ä»¥è¿›è¡Œæ›´ç²¾ç¡®çš„æ•°æ®åº“æŸ¥è¯¢ã€‚</p><p>æŸ¥è¯¢è§’è‰²ä¸ºâ€˜Userâ€™çš„æ‰€æœ‰ç”¨æˆ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.query.filter_by(role=user_role).all()</span><br></pre></td></tr></table></figure><blockquote><p>å¸¸ç”¨çš„SQLAlchemyæŸ¥è¯¢è¿‡æ»¤å™¨</p><table><thead><tr><th>è¿‡æ»¤å™¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>filter()</td><td>æŠŠè¿‡æ»¤å™¨æ·»åŠ åˆ°åŸæŸ¥è¯¢ä¸Šï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr><tr><td>filter_by()</td><td>æŠŠç­‰å€¼è¿‡æ»¤å™¨æ·»åŠ åˆ°åŸæŸ¥è¯¢ä¸Šï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr><tr><td>limit()</td><td>ä½¿ç”¨æŒ‡å®šçš„å€¼é™åˆ¶åŸæŸ¥è¯¢è¿”å›çš„ç»“æœæ•°é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr><tr><td>offset()</td><td>åç§»åŸæŸ¥è¯¢è¿”å›çš„ç»“æœï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr><tr><td>order_by()</td><td>æ ¹æ®æŒ‡å®šæ¡ä»¶å¯¹åŸæŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr><tr><td>group_by()</td><td>æ ¹æ®æŒ‡å®šæ¡ä»¶å¯¹åŸæŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢</td></tr></tbody></table><p>å¸¸ç”¨çš„SQLAlchemyæŸ¥è¯¢æ‰§è¡Œå‡½æ•°</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>all()</td><td>ä»¥åˆ—è¡¨å½¢å¼è¿”å›æŸ¥è¯¢çš„æ‰€æœ‰ç»“æœ</td></tr><tr><td>first()</td><td>è¿”å›æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå¦‚æœæ²¡æœ‰ç»“æœï¼Œåˆ™è¿”å› None</td></tr><tr><td>first_or_404()</td><td>è¿”å›æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå¦‚æœæ²¡æœ‰ç»“æœï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ï¼Œè¿”å› 404 é”™è¯¯å“åº”</td></tr><tr><td>get()</td><td>è¿”å›æŒ‡å®šä¸»é”®å¯¹åº”çš„è¡Œï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„è¡Œï¼Œåˆ™è¿”å› None</td></tr><tr><td>get_or_404()</td><td>è¿”å›æŒ‡å®šä¸»é”®å¯¹åº”çš„è¡Œï¼Œå¦‚æœæ²¡æ‰¾åˆ°æŒ‡å®šçš„ä¸»é”®ï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ï¼Œè¿”å› 404 é”™è¯¯å“åº”</td></tr><tr><td>count()</td><td>è¿”å›æŸ¥è¯¢ç»“æœçš„æ•°é‡</td></tr><tr><td>paginate()</td><td>è¿”å›ä¸€ä¸ª Paginate å¯¹è±¡ï¼Œå®ƒåŒ…å«æŒ‡å®šèŒƒå›´å†…çš„ç»“æœ</td></tr></tbody></table></blockquote>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Flask </tag>
            
            <tag> æ‰©å±• </tag>
            
            <tag> SQLAlchemy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Flaskæ‰©å±•â€”â€”Flask-WTF</title>
      <link href="/2017/02/16/Flask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-WTF/"/>
      <url>/2017/02/16/Flask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-WTF/</url>
      <content type="html"><![CDATA[<p><a href="https://flask-wtf.readthedocs.io/" target="_blank" rel="noopener">Flask-WTF</a> æä¾›äº†ç®€å•çš„ <a href="http://wtforms.simplecodes.com/docs/" target="_blank" rel="noopener">WTForms</a> çš„é›†æˆï¼Œå¯ä»¥æŠŠå¤„ç† Web è¡¨å•çš„è¿‡ç¨‹å˜æˆä¸€ç§æ„‰æ‚¦çš„ä½“éªŒã€‚ </p><a id="more"></a><h1 id="è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤"><a href="#è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤" class="headerlink" title="è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤"></a>è·¨ç«™è¯·æ±‚ä¼ªé€ ä¿æŠ¤</h1><p><a href="https://zh.wikipedia.org/zh/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0" target="_blank" rel="noopener">è·¨ç«™è¯·æ±‚ä¼ªé€ (Cross-Site Request Forgery)</a>ï¼Œä¹Ÿè¢«ç§°ä¸º <strong>one-click attack</strong> æˆ–è€… <strong>session riding</strong>ï¼Œé€šå¸¸ç¼©å†™ä¸º <strong>CSRF</strong> æˆ–è€… <strong>XSRF</strong>ï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚CSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚</p><p>ä¸ºäº†å®ç° CSRF ä¿æŠ¤ï¼Œ Flask-WTF éœ€è¦ç¨‹åºè®¾ç½®ä¸€ä¸ªå¯†é’¥ã€‚ Flask-WTF ä½¿ç”¨è¿™ä¸ªå¯†é’¥ç”Ÿæˆ<br>åŠ å¯†ä»¤ç‰Œï¼Œå†ç”¨ä»¤ç‰ŒéªŒè¯è¯·æ±‚ä¸­è¡¨å•æ•°æ®çš„çœŸä¼ªã€‚ </p><h2 id="è®¾ç½®å¯†é’¥"><a href="#è®¾ç½®å¯†é’¥" class="headerlink" title="è®¾ç½®å¯†é’¥"></a>è®¾ç½®å¯†é’¥</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.config[<span class="string">'SECRET_KEY'</span>] = <span class="string">'hard to guess string'</span></span><br></pre></td></tr></table></figure><h1 id="è¡¨å•ç±»"><a href="#è¡¨å•ç±»" class="headerlink" title="è¡¨å•ç±»"></a>è¡¨å•ç±»</h1><p>æ¯ä¸ª Web è¡¨å•éƒ½ç”±ä¸€ä¸ªç»§æ‰¿è‡ª Form çš„ç±»è¡¨ç¤ºã€‚ </p><p>ç®€å•è¡¨å•ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask.ext.wtf <span class="keyword">import</span> Form</span><br><span class="line"><span class="keyword">from</span> wtforms <span class="keyword">import</span> StringField, SubmitField</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> DataRequired</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span><span class="params">(Form)</span>:</span></span><br><span class="line">    name = StringField(<span class="string">'What is your name?'</span>, validators=[DataRequired()])</span><br><span class="line">    submit = SubmitField(<span class="string">'Submit'</span>)</span><br></pre></td></tr></table></figure><p>Nameè¡¨å•ä¸­åŒ…å«ä¸€ä¸ªnameæ–‡æœ¬å­—æ®µå’Œä¸€ä¸ªsubmitæäº¤æŒ‰é’®ï¼Œå…¶ä¸­nameæ–‡æœ¬å­—æ®µçš„validatorsæ˜¯ä¸€ä¸ªç”±éªŒè¯å‡½æ•°ç»„æˆçš„åˆ—è¡¨ã€‚</p><blockquote><p><a href="http://wtforms.readthedocs.io/en/latest/fields.html#basic-fields" target="_blank" rel="noopener">WTFormsæ”¯æŒçš„HTMLå­—æ®µ</a>å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left">å­—æ®µç±»å‹</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">StringField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µ</td></tr><tr><td style="text-align:left">TextAreaField</td><td style="text-align:left">å¤šè¡Œæ–‡æœ¬å­—æ®µ</td></tr><tr><td style="text-align:left">PasswordField</td><td style="text-align:left">å¯†ç æ–‡æœ¬å­—æ®µ</td></tr><tr><td style="text-align:left">HiddenField</td><td style="text-align:left">éšè—æ–‡æœ¬å­—æ®µ</td></tr><tr><td style="text-align:left">DateField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µï¼Œå€¼ä¸ºdatetime.dateæ ¼å¼</td></tr><tr><td style="text-align:left">DateTimeField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µï¼Œå€¼ä¸ºdatetime.datetimeæ ¼å¼</td></tr><tr><td style="text-align:left">IntegerField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µï¼Œå€¼ä¸ºæ•´æ•°</td></tr><tr><td style="text-align:left">DecimalField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µï¼Œå€¼ä¸ºdecimal.Decimal</td></tr><tr><td style="text-align:left">FloatField</td><td style="text-align:left">æ–‡æœ¬å­—æ®µï¼Œå€¼ä¸ºæµ®ç‚¹æ•°</td></tr><tr><td style="text-align:left">BooleanField</td><td style="text-align:left">å¤é€‰æ¡†ï¼Œå€¼ä¸ºTrueå’ŒFalse</td></tr><tr><td style="text-align:left">RadioField</td><td style="text-align:left">ä¸€ç»„å•é€‰æ¡†</td></tr><tr><td style="text-align:left">SelectField</td><td style="text-align:left">ä¸‹æ‹‰åˆ—è¡¨</td></tr><tr><td style="text-align:left">SelectMultipleField</td><td style="text-align:left">ä¸‹æ‹‰åˆ—è¡¨ï¼Œå¯é€‰æ‹©å¤šä¸ªå€¼</td></tr><tr><td style="text-align:left">FileField</td><td style="text-align:left">æ–‡ä»¶ä¸Šä¼ å­—æ®µ</td></tr><tr><td style="text-align:left">MultipleFileField</td><td style="text-align:left">å…è®¸é€‰æ‹©å¤šä¸ªæ–‡ä»¶çš„FileField</td></tr><tr><td style="text-align:left">SubmitField</td><td style="text-align:left">è¡¨å•æäº¤æŒ‰é’®</td></tr><tr><td style="text-align:left">FormField</td><td style="text-align:left">æŠŠè¡¨å•ä½œä¸ºå­—æ®µåµŒå…¥å¦ä¸€ä¸ªè¡¨å•</td></tr><tr><td style="text-align:left">FieldList</td><td style="text-align:left">ä¸€ç»„æŒ‡å®šç±»å‹çš„å­—æ®µ</td></tr></tbody></table><p><a href="http://wtforms.readthedocs.io/en/latest/validators.html#built-in-validators" target="_blank" rel="noopener">WTForms</a>å†…å»ºçš„éªŒè¯å‡½æ•°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>éªŒè¯å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DataRequired</td><td>ç¡®ä¿è¾“å…¥çš„å€¼æœ‰æ•ˆï¼ˆåªå«æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²è¢«è®¤ä¸ºæ˜¯æ— æ•ˆçš„ï¼‰</td></tr><tr><td>Email</td><td>éªŒè¯ç”µå­é‚®ä»¶</td></tr><tr><td>EqualTo</td><td>æ¯”è¾ƒä¸¤ä¸ªå­—æ®µçš„å€¼ï¼›å¸¸ç”¨äºè¦æ±‚è¾“å…¥ä¸¤æ¬¡å¯†ç è¿›è¡Œç¡®è®¤çš„æƒ…å†µ</td></tr><tr><td>InputRequired</td><td>ç¡®ä¿æœ‰å€¼è¾“å…¥</td></tr><tr><td>IPAddress</td><td>éªŒè¯IPv4ç½‘ç»œåœ°å€</td></tr><tr><td>Length</td><td>éªŒè¯è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦</td></tr><tr><td>MacAddress</td><td>éªŒè¯MACåœ°å€</td></tr><tr><td>NumberRange</td><td>éªŒè¯è¾“å…¥çš„å€¼åœ¨æ•°å­—èŒƒå›´å†…</td></tr><tr><td>Optional</td><td>æ— è¾“å…¥å€¼æ—¶è·³è¿‡å…¶ä»–éªŒè¯å‡½æ•°</td></tr><tr><td>Regexp</td><td>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯è¾“å…¥å€¼</td></tr><tr><td>URL</td><td>éªŒè¯URL</td></tr><tr><td>UUID</td><td>éªŒè¯UUID</td></tr><tr><td>AnyOf</td><td>ç¡®ä¿è¾“å…¥å€¼åœ¨å¯é€‰å€¼åˆ—è¡¨ä¸­</td></tr><tr><td>NoneOf</td><td>ç¡®ä¿è¾“å…¥å€¼ä¸åœ¨å¯é€‰åˆ—è¡¨ä¸­</td></tr></tbody></table></blockquote><h1 id="æŠŠè¡¨å•æ¸²æŸ“æˆHTML"><a href="#æŠŠè¡¨å•æ¸²æŸ“æˆHTML" class="headerlink" title="æŠŠè¡¨å•æ¸²æŸ“æˆHTML"></a>æŠŠè¡¨å•æ¸²æŸ“æˆHTML</h1><p>ä½¿ç”¨Flask-Bootstrapæ‰©å±•ï¼Œå¯ä»¥ä½¿ç”¨Bootstrapä¸­é¢„å…ˆå®šä¹‰å¥½çš„è¡¨å•æ ·å¼æ¸²æŸ“æ•´ä¸ªFlask-WTFè¡¨å•ã€‚</p><p><code>templates/index.html</code>æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">"base.html"</span> %&#125;</span><br><span class="line">&#123;% <span class="keyword">import</span> <span class="string">"bootstrap/wtf.html"</span> <span class="keyword">as</span> wtf %&#125;</span><br><span class="line">&#123;% block title %&#125;Flasky&#123;% endblock %&#125;</span><br><span class="line">&#123;% block page_content %&#125;</span><br><span class="line">    &lt;div class="page-header"&gt;</span><br><span class="line">        &lt;h1&gt;Hello, &#123;% if name %&#125;&#123;&#123; name &#125;&#125;&#123;% else %&#125;Stranger&#123;% endif %&#125;!&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;&#123; wtf.quick_form(form) &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h1 id="åœ¨è§†å›¾å‡½æ•°ä¸­å¤„ç†è¡¨å•"><a href="#åœ¨è§†å›¾å‡½æ•°ä¸­å¤„ç†è¡¨å•" class="headerlink" title="åœ¨è§†å›¾å‡½æ•°ä¸­å¤„ç†è¡¨å•"></a>åœ¨è§†å›¾å‡½æ•°ä¸­å¤„ç†è¡¨å•</h1><p><code>app.py</code>æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/', methods=['GET', 'POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    name = <span class="keyword">None</span></span><br><span class="line">    form = NameForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        name = form.name.data</span><br><span class="line">        form.name.data = <span class="string">''</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>, form=form, name=name)</span><br></pre></td></tr></table></figure><blockquote><p>å½“ç”¨æˆ·æäº¤POSTè¯·æ±‚æ—¶ï¼Œform.validate_on_submit()å°†ä¼šè¿”å›Trueã€‚</p></blockquote><h1 id="æäº¤è¡¨å•åçš„æ•ˆæœ"><a href="#æäº¤è¡¨å•åçš„æ•ˆæœ" class="headerlink" title="æäº¤è¡¨å•åçš„æ•ˆæœ"></a>æäº¤è¡¨å•åçš„æ•ˆæœ</h1><p><img src="https://ooo.0o0.ooo/2017/02/16/58a56238257f8.png" alt="ä¸‹è½½ (1).png"></p>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Flask </tag>
            
            <tag> æ‰©å±• </tag>
            
            <tag> WTForms </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Flaskæ‰©å±•â€”â€”Flask-Moment</title>
      <link href="/2017/02/16/Flask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-Moment/"/>
      <url>/2017/02/16/Flask%E6%89%A9%E5%B1%95%E2%80%94%E2%80%94Flask-Moment/</url>
      <content type="html"><![CDATA[<p><a href="https://momentjs.com/" target="_blank" rel="noopener">Moment.js</a>æ˜¯ä¸€ä¸ªJavaScriptæ—¥æœŸå¤„ç†ç±»åº“ï¼Œç”¨äºè§£æã€æ£€éªŒã€æ“ä½œä»¥åŠæ˜¾ç¤ºæ—¥æœŸã€‚</p><p>Flask-Momentæ˜¯ä¸€ä¸ªé›†æˆmoment.jsåˆ°Jinja2æ¨¡æ¿çš„Flaskæ‰©å±•ã€‚</p><a id="more"></a><h1 id="åˆå§‹åŒ–Flask-Moment"><a href="#åˆå§‹åŒ–Flask-Moment" class="headerlink" title="åˆå§‹åŒ–Flask-Moment"></a>åˆå§‹åŒ–Flask-Moment</h1><h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask.ext.moment <span class="keyword">import</span> Moment</span><br><span class="line">moment = Moment(app)</span><br></pre></td></tr></table></figure><h2 id="æ›´æ¢moment-jsåˆ°å›½å†…CDN"><a href="#æ›´æ¢moment-jsåˆ°å›½å†…CDN" class="headerlink" title="æ›´æ¢moment.jsåˆ°å›½å†…CDN"></a>æ›´æ¢moment.jsåˆ°å›½å†…CDN</h2><p>åœ¨<code>flask_moment.py</code>æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°å¹¶ä¿®æ”¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js = '<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/moment.js/%s/%s"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>\n' % (version, js_filename)</span><br></pre></td></tr></table></figure><h2 id="åœ¨base-htmlä¸­å¼•å…¥moment-js"><a href="#åœ¨base-htmlä¸­å¼•å…¥moment-js" class="headerlink" title="åœ¨base.htmlä¸­å¼•å…¥moment.js"></a>åœ¨<code>base.html</code>ä¸­å¼•å…¥<code>moment.js</code></h2><p>Flask-Momentä¾èµ–<code>moment.js</code>å’Œ<code>jquery.js</code>ï¼Œéœ€è¦ç›´æ¥åŒ…å«åœ¨HTMLæ–‡æ¡£é‡Œã€‚</p><p>ä½¿ç”¨äº†Flask-BootStrapæ‰©å±•åï¼Œ<code>base.html</code>å·²ä»<code>bootstrap/base.html</code>å¤„ç»§æ‰¿åˆ°äº†<code>jquery.js</code>ï¼Œåªéœ€å¼•å…¥<code>moment.js</code>ã€‚</p><p><code>templates/base.html</code>æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block scripts %&#125;</span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    &#123;&#123; moment.include_moment() &#125;&#125;</span><br><span class="line">    &#123;&#123; moment.lang(<span class="string">"zh-CN"</span>) &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨<code>moment.lang(&quot;zh-CN&quot;)</code>å°†è¯­è¨€ä¿®æ”¹ä¸ºç®€ä½“ä¸­æ–‡</p></blockquote><h1 id="ä½¿ç”¨Flask-Moment"><a href="#ä½¿ç”¨Flask-Moment" class="headerlink" title="ä½¿ç”¨Flask-Moment"></a>ä½¿ç”¨Flask-Moment</h1><h2 id="æ¸²æŸ“æ—¶ä¼ å…¥datetime"><a href="#æ¸²æŸ“æ—¶ä¼ å…¥datetime" class="headerlink" title="æ¸²æŸ“æ—¶ä¼ å…¥datetime"></a>æ¸²æŸ“æ—¶ä¼ å…¥datetime</h2><p><code>app.py</code>æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,current_time=datetime.utcnow())</span><br></pre></td></tr></table></figure><h2 id="åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“"><a href="#åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“" class="headerlink" title="åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“"></a>åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“</h2><p><code>index.html</code>æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">'base.html'</span> %&#125;</span><br><span class="line">&#123;% block page_content %&#125;</span><br><span class="line">&lt;p&gt;The local date and time is &#123;&#123; moment(current_time).format('LLL') &#125;&#125;.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;That was &#123;&#123; moment(current_time).fromNow(refresh=True) &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¸²æŸ“ç»“æœ"><a href="#æ¸²æŸ“ç»“æœ" class="headerlink" title="æ¸²æŸ“ç»“æœ"></a>æ¸²æŸ“ç»“æœ</h2><p><img src="https://ooo.0o0.ooo/2017/02/16/58a553bf3a68c.png" alt="ä¸‹è½½.png"></p><h1 id="å¸¸ç”¨æ ¼å¼åŒ–å‚æ•°"><a href="#å¸¸ç”¨æ ¼å¼åŒ–å‚æ•°" class="headerlink" title="å¸¸ç”¨æ ¼å¼åŒ–å‚æ•°"></a>å¸¸ç”¨æ ¼å¼åŒ–å‚æ•°</h1><table><thead><tr><th>Input</th><th>Example</th><th>Description</th></tr></thead><tbody><tr><td><code>YYYY</code></td><td><code>2014</code></td><td>4 or 2 digit year</td></tr><tr><td><code>YY</code></td><td><code>14</code></td><td>2 digit year</td></tr><tr><td><code>Q</code></td><td><code>1..4</code></td><td>Quarter of year. Sets month to first month in quarter.</td></tr><tr><td><code>M MM</code></td><td><code>1..12</code></td><td>Month number</td></tr><tr><td><code>MMM MMMM</code></td><td><code>Jan..December</code></td><td>Month name in locale set by <code>moment.locale()</code></td></tr><tr><td><code>D DD</code></td><td><code>1..31</code></td><td>Day of month</td></tr><tr><td><code>Do</code></td><td><code>1st..31st</code></td><td>Day of month with ordinal</td></tr><tr><td><code>DDD DDDD</code></td><td><code>1..365</code></td><td>Day of year</td></tr><tr><td><code>X</code></td><td><code>1410715640.579</code></td><td>Unix timestamp</td></tr><tr><td><code>x</code></td><td><code>1410715640579</code></td><td>Unix ms timestamp</td></tr></tbody></table>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Flask </tag>
            
            <tag> æ‰©å±• </tag>
            
            <tag> moment.js </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linuxå‘½ä»¤â€”â€”tar</title>
      <link href="/2017/02/13/linux%E5%91%BD%E4%BB%A4%E2%80%94%E2%80%94tar/"/>
      <url>/2017/02/13/linux%E5%91%BD%E4%BB%A4%E2%80%94%E2%80%94tar/</url>
      <content type="html"><![CDATA[<p>é¦–å…ˆè¦å¼„æ¸…ä¸¤ä¸ªæ¦‚å¿µï¼šæ‰“åŒ…å’Œå‹ç¼©ã€‚æ‰“åŒ…æ˜¯æŒ‡å°†ä¸€å¤§å †æ–‡ä»¶æˆ–ç›®å½•å˜æˆä¸€ä¸ªæ€»çš„æ–‡ä»¶ï¼›å‹ç¼©åˆ™æ˜¯å°†ä¸€ä¸ªå¤§çš„æ–‡ä»¶é€šè¿‡ä¸€äº›å‹ç¼©ç®—æ³•å˜æˆä¸€ä¸ªå°æ–‡ä»¶ã€‚å½“ä½ æƒ³è¦å‹ç¼©ä¸€å¤§å †æ–‡ä»¶æ—¶ï¼Œä½ å¾—å…ˆå°†è¿™ä¸€å¤§å †æ–‡ä»¶å…ˆæ‰“æˆä¸€ä¸ªåŒ…ï¼ˆtarå‘½ä»¤ï¼‰ï¼Œç„¶åå†ç”¨å‹ç¼©ç¨‹åºè¿›è¡Œå‹ç¼©ï¼ˆgzip bzip2å‘½ä»¤ï¼‰ã€‚</p><a id="more"></a><h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar [å¿…è¦å‚æ•°] [å¯é€‰å‚æ•°] [æ–‡ä»¶]</span><br></pre></td></tr></table></figure><h1 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h1><h2 id="å¿…è¦å‚æ•°"><a href="#å¿…è¦å‚æ•°" class="headerlink" title="å¿…è¦å‚æ•°"></a>å¿…è¦å‚æ•°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-A æ–°å¢å‹ç¼©æ–‡ä»¶åˆ°å·²å­˜åœ¨çš„å‹ç¼©</span><br><span class="line">-B è®¾ç½®åŒºå—å¤§å°</span><br><span class="line">-c å»ºç«‹æ–°çš„å‹ç¼©æ–‡ä»¶</span><br><span class="line">-d è®°å½•æ–‡ä»¶çš„å·®åˆ«</span><br><span class="line">-r æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶</span><br><span class="line">-u æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶</span><br><span class="line">-x ä»å‹ç¼©çš„æ–‡ä»¶ä¸­æå–æ–‡ä»¶</span><br><span class="line">-t æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">-z æ”¯æŒgzipè§£å‹æ–‡ä»¶</span><br><span class="line">-j æ”¯æŒbzip2è§£å‹æ–‡ä»¶</span><br><span class="line">-Z æ”¯æŒcompressè§£å‹æ–‡ä»¶</span><br><span class="line">-v æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹</span><br><span class="line">-l æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½®</span><br><span class="line">-k ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–</span><br><span class="line">-m ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–</span><br><span class="line">-W ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§</span><br></pre></td></tr></table></figure><h2 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-b è®¾ç½®åŒºå—æ•°ç›®</span><br><span class="line">-C åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•</span><br><span class="line">-f æŒ‡å®šå‹ç¼©æ–‡ä»¶</span><br><span class="line">--<span class="built_in">help</span> æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span><br><span class="line">--version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br></pre></td></tr></table></figure><h1 id="å¸¸è§å‹ç¼©-è§£å‹ç¼©ä¾‹å­"><a href="#å¸¸è§å‹ç¼©-è§£å‹ç¼©ä¾‹å­" class="headerlink" title="å¸¸è§å‹ç¼©/è§£å‹ç¼©ä¾‹å­"></a>å¸¸è§å‹ç¼©/è§£å‹ç¼©ä¾‹å­</h1><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è§£åŒ…ï¼štar xvf FileName.tar</span><br><span class="line">æ‰“åŒ…ï¼štar cvf FileName.tar DirName</span><br></pre></td></tr></table></figure><h2 id="gz"><a href="#gz" class="headerlink" title="gz"></a>gz</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è§£å‹ï¼štar zxvf FileName.tar.gz</span><br><span class="line">å‹ç¼©ï¼štar zcvf FileName.tar.gz DirName</span><br></pre></td></tr></table></figure><h2 id="bz2"><a href="#bz2" class="headerlink" title="bz2"></a>bz2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è§£å‹ï¼štar jxvf FileName.tar.bz2</span><br><span class="line">å‹ç¼©ï¼štar jcvf FileName.tar.bz2 DirName</span><br></pre></td></tr></table></figure><h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è§£å‹ï¼šunzip FileName.zip</span><br><span class="line">å‹ç¼©ï¼šzip FileName.zip DirName</span><br></pre></td></tr></table></figure><h1 id="å¸¸è§å®ä¾‹"><a href="#å¸¸è§å®ä¾‹" class="headerlink" title="å¸¸è§å®ä¾‹"></a>å¸¸è§å®ä¾‹</h1><h2 id="å°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…"><a href="#å°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…" class="headerlink" title="å°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…"></a>å°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -cvf log.tar log2012.log</span><br><span class="line">tar -zcvf log.tar.gz log2012.log</span><br><span class="line">tar -jcvf log.tar.bz2 log2012.log</span><br></pre></td></tr></table></figure><h2 id="æŸ¥é˜…taråŒ…å†…æ–‡ä»¶"><a href="#æŸ¥é˜…taråŒ…å†…æ–‡ä»¶" class="headerlink" title="æŸ¥é˜…taråŒ…å†…æ–‡ä»¶"></a>æŸ¥é˜…taråŒ…å†…æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -ztvf log.tar.gz</span><br></pre></td></tr></table></figure><h2 id="è§£å‹ç¼©"><a href="#è§£å‹ç¼©" class="headerlink" title="è§£å‹ç¼©"></a>è§£å‹ç¼©</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf log.tar.gz</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> tar </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>pipå‡çº§æ‰€æœ‰åŒ…</title>
      <link href="/2017/02/03/pip%E5%8D%87%E7%BA%A7%E6%89%80%E6%9C%89%E5%8C%85/"/>
      <url>/2017/02/03/pip%E5%8D%87%E7%BA%A7%E6%89%80%E6%9C%89%E5%8C%85/</url>
      <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list --outdated | cut -d<span class="string">' '</span> -f1 | xargs pip install --upgrade</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pip </tag>
            
            <tag> upgrade </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Kcptuné…ç½®</title>
      <link href="/2017/01/27/Kcptun%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/01/27/Kcptun%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>ä»¥Ubuntu-16.04-x86_64ä¸ºä¾‹ã€‚</p><a id="more"></a><h1 id="serverç«¯é…ç½®"><a href="#serverç«¯é…ç½®" class="headerlink" title="serverç«¯é…ç½®"></a>serverç«¯é…ç½®</h1><p>åˆ°<a href="https://github.com/xtaci/kcptun/releases" target="_blank" rel="noopener">https://github.com/xtaci/kcptun/releases</a>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼ˆ<a href="https://github.com/xtaci/kcptun/releases/download/v20170120/kcptun-linux-amd64-20170120.tar.gz" target="_blank" rel="noopener"><strong>kcptun-linux-amd64-20170120.tar.gz</strong></a>ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /root/kcptun</span><br><span class="line"><span class="built_in">cd</span> /root/kcptun</span><br><span class="line">wget https://github.com/xtaci/kcptun/releases/download/v20170120/kcptun-linux-amd64-20170120.tar.gz</span><br><span class="line">tar -zxf kcptun-linux-amd64-*.tar.gz</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lnÂ -sfÂ /bin/bashÂ /bin/sh</span><br></pre></td></tr></table></figure><p>åˆ›å»º<code>start.sh</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/kcptun/start.sh</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> /root/kcptun/</span><br><span class="line">./server_linux_amd64 -c /root/kcptun/server-config.json &gt; kcptun.log 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Kcptun started."</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶<code>server-config.json</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/kcptun/server-config.json</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"listen"</span>: <span class="string">":29900"</span>,</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"your_vps_ip_address:your_shadowsocks_server_port"</span>,</span><br><span class="line">    <span class="attr">"key"</span>: <span class="string">"test"</span>,</span><br><span class="line">    <span class="attr">"crypt"</span>: <span class="string">"salsa20"</span>,</span><br><span class="line">    <span class="attr">"mode"</span>: <span class="string">"fast2"</span>,</span><br><span class="line">    <span class="attr">"mtu"</span>: <span class="number">1350</span>,</span><br><span class="line">    <span class="attr">"sndwnd"</span>: <span class="number">1024</span>,</span><br><span class="line">    <span class="attr">"rcvwnd"</span>: <span class="number">1024</span>,</span><br><span class="line">    <span class="attr">"datashard"</span>: <span class="number">70</span>,</span><br><span class="line">    <span class="attr">"parityshard"</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">"dscp"</span>: <span class="number">46</span>,</span><br><span class="line">    <span class="attr">"nocomp"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"acknodelay"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"nodelay"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"interval"</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">"resend"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"nc"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"sockbuf"</span>: <span class="number">4194304</span>,</span><br><span class="line">    <span class="attr">"keepalive"</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º<code>stop.sh</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/kcptun/stop.sh</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Stopping Kcptun..."</span></span><br><span class="line">PID=`ps -ef | grep server_linux_amd64 | grep -v grep | awk <span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">""</span> !=  <span class="string">"<span class="variable">$PID</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"killing <span class="variable">$PID</span>"</span></span><br><span class="line">  <span class="built_in">kill</span> -9 <span class="variable">$PID</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Kcptun stoped."</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º<code>restart.sh</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> /root/kcptun/</span><br><span class="line">sh stop.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Restarting Kcptun..."</span></span><br><span class="line">sh start.sh</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /root/kcptun/start.sh</span><br></pre></td></tr></table></figure><p>åœæ­¢æœåŠ¡ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /root/kcptun/stop.sh</span><br></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /root/kcptun/restart.sh</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¼€æœºå¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/rc.local;<span class="built_in">echo</span> <span class="string">"sh /root/kcptun/start.sh"</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail /root/kcptun/kcptun.log</span><br></pre></td></tr></table></figure><h1 id="clientç«¯é…ç½®"><a href="#clientç«¯é…ç½®" class="headerlink" title="clientç«¯é…ç½®"></a>clientç«¯é…ç½®</h1><p>åˆ°<a href="https://github.com/xtaci/kcptun/releases" target="_blank" rel="noopener">https://github.com/xtaci/kcptun/releases</a>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼ˆ<a href="https://github.com/xtaci/kcptun/releases/download/v20170120/kcptun-windows-amd64-20170120.tar.gz" target="_blank" rel="noopener">kcptun-windows-amd64-20170120.tar.gz</a>ï¼‰ã€‚</p><p>å°†<code>kcptun-windows-amd64-*.tar.gz</code>è§£å‹</p><p>åœ¨ç›¸åŒæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»º<code>run.vbs</code></p><p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Dim</span> RunKcptun</span><br><span class="line"><span class="keyword">Set</span> fso = <span class="built_in">CreateObject</span>(<span class="string">"Scripting.FileSystemObject"</span>)</span><br><span class="line"><span class="keyword">Set</span> WshShell = WScript.<span class="built_in">CreateObject</span>(<span class="string">"WScript.Shell"</span>)</span><br><span class="line"><span class="comment">'è·å–æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">currentPath = fso.GetFile(Wscript.ScriptFullName).ParentFolder.Path &amp; <span class="string">"\"</span></span><br><span class="line"><span class="string">'é…ç½®æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">configFile = currentPath &amp; "</span>client-config.json<span class="string">"</span></span><br><span class="line"><span class="string">'æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"><span class="string">logFile = currentPath &amp; "</span>kcptun.<span class="built_in">log</span><span class="string">"</span></span><br><span class="line"><span class="string">'è½¯ä»¶è¿è¡Œå‚æ•°</span></span><br><span class="line"><span class="string">exeConfig = currentPath &amp; "</span>client_windows_amd64.exe -c <span class="string">" &amp; configFile</span></span><br><span class="line"><span class="string">'æ‹¼æ¥å‘½ä»¤è¡Œ</span></span><br><span class="line"><span class="string">cmdLine = "</span>cmd /c <span class="string">" &amp; exeConfig &amp; "</span> &gt; <span class="string">" &amp; logFile &amp; "</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span><span class="string">"</span></span><br><span class="line"><span class="string">'å¯åŠ¨è½¯ä»¶</span></span><br><span class="line"><span class="string">WshShell.Run cmdLine, 0, False</span></span><br><span class="line"><span class="string">'ç­‰å¾…1ç§’</span></span><br><span class="line"><span class="string">'WScript.Sleep 1000</span></span><br><span class="line"><span class="string">'æ‰“å°è¿è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="string">'Wscript.echo cmdLine</span></span><br><span class="line"><span class="string">Set WshShell = Nothing</span></span><br><span class="line"><span class="string">Set fso = Nothing</span></span><br><span class="line"><span class="string">'é€€å‡ºè„šæœ¬</span></span><br><span class="line"><span class="string">WScript.quit</span></span><br></pre></td></tr></table></figure><p>æ–°å»º<code>client-config.json</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"localaddr"</span>: <span class="string">":12948"</span>,</span><br><span class="line">    <span class="attr">"remoteaddr"</span>: <span class="string">"your_vps_ip_address:29900"</span>,</span><br><span class="line">    <span class="attr">"key"</span>: <span class="string">"test"</span>,</span><br><span class="line">    <span class="attr">"crypt"</span>: <span class="string">"salsa20"</span>,</span><br><span class="line">    <span class="attr">"mode"</span>: <span class="string">"fast2"</span>,</span><br><span class="line">    <span class="attr">"conn"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"autoexpire"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"mtu"</span>: <span class="number">1350</span>,</span><br><span class="line">    <span class="attr">"sndwnd"</span>: <span class="number">128</span>,</span><br><span class="line">    <span class="attr">"rcvwnd"</span>: <span class="number">1024</span>,</span><br><span class="line">    <span class="attr">"datashard"</span>: <span class="number">70</span>,</span><br><span class="line">    <span class="attr">"parityshard"</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">"dscp"</span>: <span class="number">46</span>,</span><br><span class="line">    <span class="attr">"nocomp"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"acknodelay"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"nodelay"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"interval"</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">"resend"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"nc"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"sockbuf"</span>: <span class="number">4194304</span>,</span><br><span class="line">    <span class="attr">"keepalive"</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–°å»º<code>stop.bat</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /f /im client_windows_amd64.exe</span><br></pre></td></tr></table></figure><p>æ–°å»º<code>startUp.bat</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">title Kcptun å¼€æœºå¯åŠ¨è®¾ç½®</span><br><span class="line">mode con cols=50 lines=20</span><br><span class="line">color A</span><br><span class="line">echo.</span><br><span class="line">echo.                Kcptun å¯åŠ¨é¡¹è®¾ç½®</span><br><span class="line">echo.</span><br><span class="line">echo.     æ­¤æ‰¹å¤„ç†å¯ä»¥å°† Kcptun å®¢æˆ·ç«¯æ·»åŠ åˆ°å¼€æœºå¯åŠ¨</span><br><span class="line">echo.</span><br><span class="line">echo.       è¯·å°†è¯¥æ–‡ä»¶æ”¾åˆ° run.vbs ç›¸åŒç›®å½•åè¿è¡Œ</span><br><span class="line">echo.</span><br><span class="line">echo.</span><br><span class="line">set /p ST=è¾“å…¥ y æ·»åŠ å¼€æœºå¯åŠ¨ï¼Œè¾“å…¥ n å–æ¶ˆå¼€æœºå¯åŠ¨ï¼š</span><br><span class="line">if /I &quot;%ST%&quot;==&quot;y&quot; goto addStartup</span><br><span class="line">if /I &quot;%ST%&quot;==&quot;n&quot; goto delStartup</span><br><span class="line">:addStartup</span><br><span class="line">reg add &quot;HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Run&quot; /v &quot;Kcptun Client&quot; /t REG_SZ /d &quot;\&quot;%~dp0run.vbs\&quot;&quot; /F&gt;NUL</span><br><span class="line">exit</span><br><span class="line">:delStartup</span><br><span class="line">reg delete &quot;HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Run&quot; /v &quot;kcptun Client&quot; /F&gt;NUL 2&gt;NUL</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºä½¿ç”¨<code>run.vbs</code>ï¼Œåœæ­¢ç¨‹åºä½¿ç”¨<code>stop.bat</code>ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ä½¿ç”¨<code>kcptun.log</code>ã€‚</p><h1 id="shadowsocksé…ç½®"><a href="#shadowsocksé…ç½®" class="headerlink" title="shadowsocksé…ç½®"></a>shadowsocksé…ç½®</h1><p>åœ¨å®¢æˆ·ç«¯ä¸­æ–°å»ºæœåŠ¡å™¨ï¼š</p><ul><li>æœåŠ¡å™¨IPå¡«å†™ï¼š127.0.0.1</li><li>æœåŠ¡å™¨ç«¯å£å¡«å†™ï¼š12948</li></ul><p>å…¶ä½™éƒ¨åˆ†æ­£ç¡®å¡«å†™ã€‚</p><h1 id="é€Ÿåº¦æµ‹è¯•"><a href="#é€Ÿåº¦æµ‹è¯•" class="headerlink" title="é€Ÿåº¦æµ‹è¯•"></a>é€Ÿåº¦æµ‹è¯•</h1><p><img src="https://ooo.0o0.ooo/2017/01/27/588af723cb09f.png" alt="2017-01-27.png"></p>]]></content>
      
      
        <tags>
            
            <tag> Kcptun </tag>
            
            <tag> Shadowsocks </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åœ¨powershellä¸­æ ¡éªŒæ–‡ä»¶Hash</title>
      <link href="/2016/12/03/%E5%9C%A8powershell%E4%B8%AD%E6%A0%A1%E9%AA%8C%E6%96%87%E4%BB%B6Hash/"/>
      <url>/2016/12/03/%E5%9C%A8powershell%E4%B8%AD%E6%A0%A1%E9%AA%8C%E6%96%87%E4%BB%B6Hash/</url>
      <content type="html"><![CDATA[<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-FileHash [-Path <span class="string">"æ–‡ä»¶è·¯å¾„"</span>] [-Algorithm ç®—æ³•]</span><br></pre></td></tr></table></figure><h1 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h1><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h2><ul><li>SHA1</li><li>SHA256</li><li>SHA384</li><li>SHA512</li><li>MACTripleDES</li><li>MD5</li><li>RIPEMD160</li></ul><p>ğŸŒ: <a href="https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.utility/get-filehash" target="_blank" rel="noopener">https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.utility/get-filehash</a></p>]]></content>
      
      
        <tags>
            
            <tag> powershell </tag>
            
            <tag> hash </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>scrapyå®‰è£…çš„å‘</title>
      <link href="/2016/11/15/scrapy%E5%AE%89%E8%A3%85%E7%9A%84%E5%9D%91/"/>
      <url>/2016/11/15/scrapy%E5%AE%89%E8%A3%85%E7%9A%84%E5%9D%91/</url>
      <content type="html"><![CDATA[<h1 id="Microsoft-Visual-C-14-0-required"><a href="#Microsoft-Visual-C-14-0-required" class="headerlink" title="Microsoft Visual C++ 14.0 required"></a>Microsoft Visual C++ 14.0 required</h1><p>åˆ°<a href="http://landinghub.visualstudio.com/visual-cpp-build-tools" target="_blank" rel="noopener">visualstudio.com</a>ä¸‹è½½Visual C++ Build Tools 2015ï¼Œå‹¾é€‰<code>ATL/MFC SDK</code>ã€‚</p><p><img src="https://ooo.0o0.ooo/2016/11/15/582ac78757f9a.png" alt=""></p><h1 id="pipæ— æ³•å®‰è£…lxml"><a href="#pipæ— æ³•å®‰è£…lxml" class="headerlink" title="pipæ— æ³•å®‰è£…lxml"></a>pipæ— æ³•å®‰è£…lxml</h1><p>åˆ°<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml" target="_blank" rel="noopener">lfd.uci.edu</a>ä¸‹è½½å¯¹åº”çš„<code>lxml*.whl</code>ï¼Œä½¿ç”¨<code>pip install lxml*.whl</code>å®‰è£…</p><h1 id="No-module-named-win32api"><a href="#No-module-named-win32api" class="headerlink" title="No module named win32api"></a>No module named win32api</h1><p>è¿è¡Œ<code>scrapy crawl</code>å‘½ä»¤æ—¶ï¼Œä¼šå‡ºç°æ­¤é—®é¢˜</p><p><img src="https://ooo.0o0.ooo/2016/11/15/582ac7872e817.png" alt=""></p><p>åˆ°<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">lfd.uci.edu</a>ä¸‹è½½å¯¹åº”çš„<code>pywin32*.whl</code>å®‰è£…</p><p>å†è¿›å…¥<code>C:\Users\Li\AppData\Local\Programs\Python\Python36\Scripts</code>ç›®å½•ï¼Œæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pywin32_postinstall.py -install</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Windowsä¸­åˆ é™¤è·¯å¾„å¤ªé•¿ç›®å½•åŠæ–‡ä»¶</title>
      <link href="/2016/09/10/Windows%E4%B8%AD%E5%88%A0%E9%99%A4%E8%B7%AF%E5%BE%84%E5%A4%AA%E9%95%BF%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6/"/>
      <url>/2016/09/10/Windows%E4%B8%AD%E5%88%A0%E9%99%A4%E8%B7%AF%E5%BE%84%E5%A4%AA%E9%95%BF%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>å½“å‰ç›®å½•ä¸‹shift+é¼ æ ‡å³é”®<code>åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£</code></p><p><code>robocopy empty_dir will_delete_dir /purge</code></p><ul><li>empty_dir æ–°å»ºçš„ç©ºç™½ç›®å½•</li><li>will_delete_dir è¦åˆ é™¤çš„ç›®å½•</li><li>æ³¨æ„ä¸­é—´çš„ç©ºæ ¼</li></ul><blockquote><p><strong>æ³¨æ„æ­¤æ–¹æ³•å°†åˆ é™¤ç›®æ ‡è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œæ…ç”¨ï¼ï¼ï¼</strong></p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> è·¯å¾„å¤ªé•¿ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨shadowsocksä»£ç†UWPåº”ç”¨</title>
      <link href="/2016/09/01/%E4%BD%BF%E7%94%A8shadowsocks%E4%BB%A3%E7%90%86UWP%E5%BA%94%E7%94%A8/"/>
      <url>/2016/09/01/%E4%BD%BF%E7%94%A8shadowsocks%E4%BB%A3%E7%90%86UWP%E5%BA%94%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>UWPçš„åº”ç”¨å®¹å™¨è®¾ç½®æœ‰AppContainer Loopbackï¼Œä¸å…è®¸å‘é€ç½‘ç»œè¯·æ±‚ç»™æœ¬åœ°æœåŠ¡å™¨ã€‚</p><p>å¯ä»¥ä½¿ç”¨<a href="https://www.fiddler2.com/dl/EnableLoopbackUtility.exe" target="_blank" rel="noopener">Enable AppContainer Loopback</a>ä½¿UWPåº”ç”¨ç»•è¿‡Loopbackã€‚</p><p><img src="https://ooo.0o0.ooo/2016/11/15/582acdc60997f.png" alt=""></p><p>ç‚¹å‡»<code>Exempt All</code>ï¼Œå†ç‚¹å‡»<code>Save Changes</code>ï¼Œå°±å¯ä»¥ä½¿æ‰€æœ‰çš„UWPåº”ç”¨èƒ½å¤Ÿè¢«shadowsocksä»£ç†ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> Shadowsocks </tag>
            
            <tag> UWP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>VPSä¸Šéƒ¨ç½²Shadowsocks &amp; é”é€Ÿ</title>
      <link href="/2016/01/11/VPS%E4%B8%8A%E9%83%A8%E7%BD%B2Shadowsocks-%E9%94%90%E9%80%9F/"/>
      <url>/2016/01/11/VPS%E4%B8%8A%E9%83%A8%E7%BD%B2Shadowsocks-%E9%94%90%E9%80%9F/</url>
      <content type="html"><![CDATA[<p>ä»¥Digital Ocean, Ubuntu 14.04 x64 vmlinuz-3.13.0-24-genericä¸ºä¾‹ã€‚</p><a id="more"></a><h1 id="é…ç½®Shadowsocks-Server"><a href="#é…ç½®Shadowsocks-Server" class="headerlink" title="é…ç½®Shadowsocks Server"></a>é…ç½®Shadowsocks Server</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>Shadowsocks, a secure socks5 proxy, designed to protect your Internet traffic.</p></blockquote><p>åˆ°<a href="https://shadowsocks.org/en/download/servers.html" target="_blank" rel="noopener">shadowsocks.org</a>é€‰æ‹©åˆé€‚ç‰ˆæœ¬çš„Shadowsockså®‰è£…ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åˆ›å»º<code>/etc/shadowsocks.json</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/shadowsocks.json</span><br></pre></td></tr></table></figure></p><p>å¡«å†™<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"my_server_ip"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"my_password"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">600</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºè„šæœ¬<code>/etc/init.d/shadowsocks</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/init.d/shadowsocks</span><br></pre></td></tr></table></figure></p><p>å¡«å†™<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">       ssserver -c /etc/shadowsocks.json -d start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">        ssserver -c /etc/shadowsocks.json -d stop</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">reload)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> &#123;start|reload|stop&#125;"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p><p>å¢åŠ å¯æ‰§è¡Œæƒé™<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/init.d/shadowsocks</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºæ–‡ä»¶<code>/etc/init/shadowsocks.conf</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">start on (runlevel [2345])</span><br><span class="line">stop on (runlevel [016])</span><br><span class="line"></span><br><span class="line">pre-start script</span><br><span class="line">/etc/init.d/shadowsocks start</span><br><span class="line">end script</span><br><span class="line"></span><br><span class="line">post-stop script</span><br><span class="line">/etc/init.d/shadowsocks stop</span><br><span class="line">end script</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d shadowsocks defaults</span><br></pre></td></tr></table></figure></p><p>è‡³æ­¤ï¼Œå¯ä»¥ä½¿ç”¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service shadowsocks &#123;start|reload|stop&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥æ§åˆ¶shadowsocksæœåŠ¡</p><h1 id="é…ç½®é”é€Ÿ"><a href="#é…ç½®é”é€Ÿ" class="headerlink" title="é…ç½®é”é€Ÿ"></a><del>é…ç½®é”é€Ÿ</del></h1><h2 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a><del>æ³¨å†Œ</del></h2><p><del>&gt;<a href="http://www.serverspeeder.com/" target="_blank" rel="noopener">é”é€Ÿ</a>ï¼Œä¸“ä¸šçš„TCPåŠ é€Ÿå™¨ï¼Œæ˜¾è‘—æå‡å¸¦å®½ååé‡ï¼Œå……åˆ†åˆ©ç”¨æœåŠ¡å™¨å¸¦å®½ã€‚</del></p><h2 id="åˆ‡æ¢å†…æ ¸"><a href="#åˆ‡æ¢å†…æ ¸" class="headerlink" title="*åˆ‡æ¢å†…æ ¸"></a>*<del>åˆ‡æ¢å†…æ ¸</del></h2><p><del>é”é€Ÿç°åœ¨æ”¯æŒçš„Linuxå†…æ ¸æœ‰é™ï¼ŒæŸ¥è¯¢<a href="http://my.serverspeeder.com/ls.do?m=availables" target="_blank" rel="noopener">æ”¯æŒåˆ—è¡¨</a>ã€‚</del></p><p><del>Digital Oceanåˆ‡æ¢å†…æ ¸æ–¹æ³•ï¼š</del></p><p><del>æ‰“å¼€Dropletæ§åˆ¶å°ï¼Œå…³é—­VPS</del><br><img src="https://ooo.0o0.ooo/2016/11/15/582ac88145d01.png" alt=""></p><p><del>ç‚¹å‡»<code>Settings-&gt;Kernel</code>ï¼Œé€‰æ‹©ä¸€ä¸ªé”é€Ÿæ”¯æŒçš„å†…æ ¸ï¼Œå¦‚Ubuntu 14.04 x64 vmlinuz-3.13.0-24-genericã€‚</del></p><p><code>~~Power On~~</code></p><p><del>é‡æ–°è¿æ¥VPSï¼ŒæŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</del><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a><del>å®‰è£…</del></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://my.serverspeeder.com/d/ls/serverSpeederInstaller.tar.gz</span><br><span class="line">tar xzvf serverSpeederInstaller.tar.gz</span><br><span class="line">bash serverSpeederInstaller.sh</span><br></pre></td></tr></table></figure><p><del>è¾“å…¥åœ¨é”é€Ÿå®˜ç½‘æ³¨å†Œçš„é‚®ç®±å’Œå¯†ç ï¼Œä¸€è·¯é»˜è®¤é€‰é¡¹ã€‚</del></p><p><del>é‡å¯Shadowsocks</del><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service shadowsocks reload</span><br></pre></td></tr></table></figure></p><h1 id="é…ç½®Shadowsocks-Client"><a href="#é…ç½®Shadowsocks-Client" class="headerlink" title="é…ç½®Shadowsocks Client"></a>é…ç½®Shadowsocks Client</h1><h2 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h2><p><a href="https://shadowsocks.org/en/download/clients.html" target="_blank" rel="noopener">shadowsocks.org</a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬å®¢æˆ·ç«¯ã€‚</p><p>æŒ‰ç…§å®é™…æƒ…å†µå¡«å†™æœåŠ¡å™¨IPã€ç«¯å£å·ä»¥åŠå¯†ç ã€‚<br><img src="https://ooo.0o0.ooo/2016/11/15/582ac880ed8e0.png" alt=""></p><p>å¯ç”¨ç³»ç»Ÿä»£ç†</p><p>å¯ä»¥ä¸Šæ²¹ç®¡æ„‰å¿«åœ°ç©è€äº†ã€‚<br><img src="https://ooo.0o0.ooo/2016/11/16/582bcd75de31a.png" alt=""></p><h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><p><a href="http://apps.evozi.com/apk-downloader/" target="_blank" rel="noopener">APK Downloader</a>æ˜¯ä¸€ä¸ªåœ¨çº¿ä¸‹è½½<a href="https://play.google.com/store" target="_blank" rel="noopener">Google Play</a>ä¸­åº”ç”¨çš„ç½‘ç«™ã€‚</p><p>è¾“å…¥<code>com.github.shadowsocks</code>ï¼Œç‚¹å‡»<code>Generate Download Link</code>ä¸‹è½½APK<br><img src="https://ooo.0o0.ooo/2016/11/15/582ac8811bdbf.png" alt=""></p><p>å®‰è£…å®Œæˆåï¼ŒåŸºæœ¬é…ç½®å’ŒPCç«¯ç±»ä¼¼<br><img src="https://ooo.0o0.ooo/2016/11/15/582ac88144608.png" alt=""></p>]]></content>
      
      
        <tags>
            
            <tag> Shadowsocks </tag>
            
            <tag> VPS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹å¹¶ç»ˆæ­¢</title>
      <link href="/2015/07/22/%E6%9F%A5%E7%9C%8B%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%B9%B6%E7%BB%88%E6%AD%A2/"/>
      <url>/2015/07/22/%E6%9F%A5%E7%9C%8B%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%B9%B6%E7%BB%88%E6%AD%A2/</url>
      <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Tomcatçš„è¿‡ç¨‹ä¸­æ€»æœ‰ç«¯å£è¢«å ç”¨çš„æƒ…å†µï¼Œæ­¤æ—¶éœ€è¦æ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹å¹¶æ€æ‰</p><h1 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h1><h2 id="æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£å ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£å ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£å ç”¨æƒ…å†µ"></a>æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£å ç”¨æƒ…å†µ</h2><pre><code>netstat -ano</code></pre><p>ä¼šè¿”å›ï¼š</p><p>åè®®    æœ¬åœ°åœ°å€    å¤–éƒ¨åœ°å€    çŠ¶æ€    PID</p><h2 id="æŸ¥çœ‹æŒ‡å®šçš„ç«¯å£å ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹æŒ‡å®šçš„ç«¯å£å ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šçš„ç«¯å£å ç”¨æƒ…å†µ"></a>æŸ¥çœ‹æŒ‡å®šçš„ç«¯å£å ç”¨æƒ…å†µ</h2><pre><code>netstat -ano|findstr &quot;ç«¯å£å·&quot;</code></pre><p>ä¼šè¿”å›ï¼š</p><p>åè®®    æœ¬åœ°åœ°å€    å¤–éƒ¨åœ°å€    çŠ¶æ€    PID</p><h2 id="æŸ¥çœ‹PIDå¯¹åº”çš„è¿›ç¨‹"><a href="#æŸ¥çœ‹PIDå¯¹åº”çš„è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹PIDå¯¹åº”çš„è¿›ç¨‹"></a>æŸ¥çœ‹PIDå¯¹åº”çš„è¿›ç¨‹</h2><pre><code>tasklist|findstr &quot;PID&quot;</code></pre><p>ä¼šè¿”å›ï¼š</p><p>æ˜ åƒåç§°    PID    ä¼šè¯å    ä¼šè¯#    å†…å­˜ä½¿ç”¨</p><h2 id="æ€æ­»è¯¥è¿›ç¨‹"><a href="#æ€æ­»è¯¥è¿›ç¨‹" class="headerlink" title="æ€æ­»è¯¥è¿›ç¨‹"></a>æ€æ­»è¯¥è¿›ç¨‹</h2><pre><code>taskkill /T /F /PID PID</code></pre><hr><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="æŸ¥çœ‹ç«¯å£ï¼ˆå¦‚8080ç«¯å£ï¼‰"><a href="#æŸ¥çœ‹ç«¯å£ï¼ˆå¦‚8080ç«¯å£ï¼‰" class="headerlink" title="æŸ¥çœ‹ç«¯å£ï¼ˆå¦‚8080ç«¯å£ï¼‰"></a>æŸ¥çœ‹ç«¯å£ï¼ˆå¦‚8080ç«¯å£ï¼‰</h2><pre><code>netstat -lnp|grep 8080</code></pre><p>ä¼šè¿”å›ï¼š</p><p>tcp6    0    0    :::8080    :::*    LISTEN    5263/java</p><h2 id="æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹"><a href="#æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹" class="headerlink" title="æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹"></a>æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹</h2><pre><code>kill -9 5263</code></pre>]]></content>
      
      
        <tags>
            
            <tag> ç«¯å£ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>IntelliJ IDEA14é›†æˆTomcat</title>
      <link href="/2015/07/22/IntelliJ-IDEA-14%E9%9B%86%E6%88%90Tomcat/"/>
      <url>/2015/07/22/IntelliJ-IDEA-14%E9%9B%86%E6%88%90Tomcat/</url>
      <content type="html"><![CDATA[<p>åœ¨IntelliJ IDEA 14ä¸­é›†æˆTomcat</p><a id="more"></a><h1 id="Tomcatå®‰è£…"><a href="#Tomcatå®‰è£…" class="headerlink" title="Tomcatå®‰è£…"></a>Tomcatå®‰è£…</h1><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p><a href="http://tomcat.apache.org/" target="_blank" rel="noopener">Tomcatå®˜ç½‘</a></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åœ¨ç¯å¢ƒå˜é‡é‡Œå…ˆé…ç½®å¥½JAVA_HOME<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa38fc28.png" alt=""></p><p>å†é…ç½®CATALINA_HOMEï¼ˆTomcatåŸåCatalinaï¼‰<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa37f21c.png" alt=""></p><p>è¿è¡Œbinç›®å½•ä¸‹çš„ <code>startup.bat</code><br><img src="https://ooo.0o0.ooo/2016/11/15/582acc102c601.png" alt=""></p><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080</code> ï¼Œè‹¥æˆåŠŸï¼Œåº”è§åˆ°å¦‚ä¸‹ç•Œé¢<br><img src="https://ooo.0o0.ooo/2016/11/15/582acc10afa82.png" alt=""></p><hr><h1 id="IntelliJ-IDEAçš„é…ç½®"><a href="#IntelliJ-IDEAçš„é…ç½®" class="headerlink" title="IntelliJ IDEAçš„é…ç½®"></a>IntelliJ IDEAçš„é…ç½®</h1><h2 id="åˆ›å»ºJava-Webé¡¹ç›®"><a href="#åˆ›å»ºJava-Webé¡¹ç›®" class="headerlink" title="åˆ›å»ºJava Webé¡¹ç›®"></a>åˆ›å»ºJava Webé¡¹ç›®</h2><p><code>File â€”&gt; New â€”&gt; Project</code> æ–°å»ºä¸€ä¸ªåä¸ºJavaWebçš„é¡¹ç›®<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa435738.png" alt=""></p><p>åœ¨ <code>WEB-INF</code> ç›®å½•ä¸‹ <code>å³é”® â€”&gt; New â€”&gt; Directory</code> ï¼Œæ–°å»º <code>classes</code> å’Œ <code>lib</code> ç›®å½•<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3d8c4f.png" alt=""></p><p><code>File â€”&gt; Project Structure</code> ï¼Œæ‰“å¼€Project Structureçª—å£<br> <code>Modules â€”&gt; JavaWeb â€”&gt; Paths</code> å‹¾é€‰ <code>Use module compile output path</code> ï¼Œå°† <code>Output path</code> å’Œ <code>Test output path</code> çš„è·¯å¾„éƒ½æ”¹ä¸ºåˆšæ‰æ–°å»ºçš„ <code>classes</code><br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3dee52.png" alt=""></p><p>åˆ‡æ¢åˆ° <code>Dependencies</code> é€‰é¡¹å¡ï¼Œç‚¹å‡» <font color="#00FF00">+</font> ï¼Œé€‰æ‹© <code>2 Library...</code> æ·»åŠ Tomcat<br><img src="https://ooo.0o0.ooo/2016/11/15/582acc1025dce.png" alt=""></p><p>å†æ¬¡ç‚¹å‡» <font color="#00FF00">+</font> ï¼Œé€‰æ‹©<code>1 JARs or directories...</code> ï¼Œé€‰æ‹©åˆšåˆšæ–°å»ºçš„ <code>lib</code> ç›®å½•<br><img src="https://ooo.0o0.ooo/2016/11/15/582acc101f4b6.png" alt=""></p><p>é€‰æ‹© <code>Jar Directory</code><br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3bba04.png" alt=""></p><p>ç‚¹å‡» <code>Artifacts</code> é€‰é¡¹å¡</p><p>å‹¾é€‰ <code>Build on make</code> ï¼Œè¡¨ç¤ºç¼–è¯‘çš„æ—¶å€™å°±æ‰“åŒ…éƒ¨ç½²</p><p>å‹¾é€‰ <code>Show content of elements</code> ï¼Œè¡¨ç¤ºæ˜¾ç¤ºè¯¦ç»†çš„å†…å®¹åˆ—è¡¨ã€‚<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3a50f7.png" alt=""></p><h2 id="é…ç½®Tomcat"><a href="#é…ç½®Tomcat" class="headerlink" title="é…ç½®Tomcat"></a>é…ç½®Tomcat</h2><p>ç‚¹å‡» <code>Runâ€”&gt;Edit Configurations</code> ï¼Œè¿›å…¥ <code>Run Configurations</code> çª—å£</p><p>ç‚¹å‡» <font color="#00FF00">+</font> ï¼Œé€‰æ‹© <code>Tomcat Server â€”&gt; Local</code> ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Tomcatå®¹å™¨<br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa45e1dd.png" alt=""></p><p>åœ¨ <code>Name</code> å¤„è¾“å…¥æ–°çš„æœåŠ¡å</p><p>åœ¨  <code>Server</code> é€‰é¡¹å¡ä¸­ï¼Œå»æ‰å‹¾é€‰ <code>After launch</code> ï¼Œè®¾ç½® <code>HTTP port</code> å’Œ <code>JMX port</code> ï¼Œç‚¹å‡» <code>Apply â€”&gt; OK</code> ï¼ŒTomcaté…ç½®å®Œæˆ<br><img src="https://ooo.0o0.ooo/2016/11/15/582acc0f89f66.png" alt=""></p><h2 id="åœ¨Tomcatä¸­éƒ¨ç½²å¹¶è¿è¡Œé¡¹ç›®"><a href="#åœ¨Tomcatä¸­éƒ¨ç½²å¹¶è¿è¡Œé¡¹ç›®" class="headerlink" title="åœ¨Tomcatä¸­éƒ¨ç½²å¹¶è¿è¡Œé¡¹ç›®"></a>åœ¨Tomcatä¸­éƒ¨ç½²å¹¶è¿è¡Œé¡¹ç›®</h2><p>ç‚¹å‡» <code>Run â€”&gt; Edit Configurations</code> è¿›å…¥ <code>Run/Debug Configurations</code> çª—å£ï¼Œé€‰æ‹©ä¹‹å‰é…ç½®å¥½çš„Tomcatï¼Œç‚¹å‡» <code>Deployment</code> é€‰é¡¹å¡ï¼Œä¿®æ”¹ <code>Application context</code><br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3203f0.png" alt=""></p><p>ä¿®æ”¹ <code>index.jsp</code><br><img src="https://ooo.0o0.ooo/2016/11/15/582acaa3ec1b5.png" alt=""></p><p>å¹¶è¿è¡ŒTomcatï¼Œåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ç»“æœ</p><p>IntelliJ IDEAå¿«æ·é”®ï¼š<code>Shift+F10</code>ï¼Œè¿è¡ŒTomcatï¼›<code>Alt+F2</code>ï¼Œé€‰æ‹©æµè§ˆå™¨å¯åŠ¨<br><img src="https://ooo.0o0.ooo/2016/11/15/582acc1061908.png" alt=""></p>]]></content>
      
      
        <tags>
            
            <tag> IntelliJ IDEA </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello Hexo</title>
      <link href="/2015/01/29/Hello-Hexo/"/>
      <url>/2015/01/29/Hello-Hexo/</url>
      <content type="html"><![CDATA[<p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>æ˜¯å°æ¹¾å¤§å­¦ç”ŸTommy Chenåˆ›é€ çš„åŸºäºNode.jsçš„é™æ€åšå®¢ç¨‹åºï¼Œå…¶ç¼–è¯‘ä¸Šç™¾ç¯‡æ–‡å­—åªéœ€è¦å‡ ç§’ã€‚Hexoç”Ÿæˆçš„é™æ€ç½‘é¡µå¯ä»¥ç›´æ¥æ”¾åˆ°<del>GitCafe Pages</del>ï¼ŒCoding Pagesï¼ŒBAEï¼ŒSAEç­‰å¹³å°ä¸Šã€‚</p><a id="more"></a><h1 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h1><h2 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h2><p>åˆ°<a href="https://nodejs.org/" target="_blank" rel="noopener">Node.jså®˜ç½‘</a>ä¸‹è½½ç›¸åº”å¹³å°æœ€æ–°ç‰ˆæœ¬çš„Node.jsï¼Œä¸€è·¯å®‰è£…ã€‚</p><h2 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h2><p>Gitæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<a href="http://msysgit.github.io/" target="_blank" rel="noopener">msysGit</a>ã€‚</p><h1 id="GitCafe"><a href="#GitCafe" class="headerlink" title="GitCafÃ©"></a><del>GitCafÃ©</del></h1><blockquote><p><del>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€æµè¡Œæœ€ä¼˜ç§€çš„é¡¹ç›®ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¹‹ä¸€ï¼ŒCafeçš„æ„æ€ä¸ºå’–å•¡é¦†ï¼Œè±¡å¾ç€ç¨‹åºå‘˜æ–‡åŒ–ã€‚åœ¨GitCafeè¿™ä¸ªå¹³å°ä¸Šï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾çš„åœ¨çº¿åä½œå…±åŒå¼€å‘å‡ºä¸€ä¸ªåˆä¸€ä¸ªå¼€æºæˆ–è€…ç§æœ‰é¡¹ç›®ã€‚é€šè¿‡GitCafeï¼Œå¼€å‘é¡¹ç›®çš„æ§åˆ¶ä¸å›¢é˜Ÿç®¡ç†å°†å˜å¾—æ–¹ä¾¿ä¸æœ‰æ•ˆã€‚</del></p></blockquote><p><del>GitCafÃ©æä¾›PagesæœåŠ¡ï¼ŒPagesæœåŠ¡ç®€å•æ¥è¯´æ˜¯é€šè¿‡åœ¨GitCafÃ©ä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ‰˜ç®¡é™æ€ç½‘é¡µæ–‡ä»¶ï¼Œåœ¨æŒ‡å®šçš„æ¡ä»¶ä¸‹ï¼ŒGitCafÃ©ä¼šä¸ºæ‚¨å‡†å¤‡å¥½ä¸€ä¸ª<code>username.gitcafe.com</code>çš„äºŒçº§åŸŸåç”¨äºæ¸²æŸ“æ‚¨çš„ä¸ªäººé™æ€é¡µé¢ã€‚</del></p><p><a href="http://gitcafe.com/signup?invited_by=DoubleX-Li" title="é‚€è¯·é“¾æ¥" target="_blank" rel="noopener"><del>æ³¨å†ŒGitCafÃ©</del></a></p><h1 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h1><blockquote><p>CODING ï¼ˆæ·±åœ³å¸‚å¸Œäº‘ç§‘æŠ€æœ‰é™å…¬å¸ï¼‰æ˜¯å›½å†…ä¸“ä¸šçš„ä¸€ç«™å¼äº‘ç«¯è½¯ä»¶æœåŠ¡å¹³å°ï¼Œæˆç«‹äº 2014 å¹´ 2 æœˆã€‚</p></blockquote><p>Coding Pages æ˜¯ä¸€ä¸ªå…è´¹çš„é™æ€ç½‘é¡µæ‰˜ç®¡å’Œæ¼”ç¤ºæœåŠ¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Coding Pages æ‰˜ç®¡åšå®¢ã€é¡¹ç›®å®˜ç½‘ç­‰é™æ€ç½‘é¡µï¼Œè¿˜å¯ä»¥ç»‘å®šè‡ªå®šä¹‰åŸŸåã€‚</p><p><a href="https://coding.net/register?key=e8e93603-4b04-48c1-8f56-fc114a265296" title="é‚€è¯·é“¾æ¥" target="_blank" rel="noopener">æ³¨å†ŒCoding</a></p><h2 id="åˆ›å»ºpage"><a href="#åˆ›å»ºpage" class="headerlink" title="åˆ›å»ºpage"></a>åˆ›å»ºpage</h2><p>åˆ›å»ºä¸€ä¸ªä¸ç”¨æˆ·å<strong>ç›¸åŒåç§°</strong>çš„é¡¹ç›®<br><img src="https://ooo.0o0.ooo/2016/11/15/582acd1ed867b.png" alt=""></p><h2 id="SSHæ·»åŠ "><a href="#SSHæ·»åŠ " class="headerlink" title="SSHæ·»åŠ "></a>SSHæ·»åŠ </h2><p>æ‰“å¼€å®‰è£…å¥½çš„GitBash<br>é¦–å…ˆè®¾ç½®ä½ çš„ç”¨æˆ·åå’Œé‚®ç®±</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">"&#123;Email&#125;"</span></span><br><span class="line">git config --global user.name <span class="string">"&#123;UserName&#125;"</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º.sshç›®å½•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.ssh</span><br><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br></pre></td></tr></table></figure></p><p>ç”Ÿæˆå¯†é’¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"your_email@example.com"</span></span><br><span class="line"><span class="comment"># ç”¨ç§äººé‚®ç®±åˆ›å»ºä¸€ä¸ªå¯†é’¥</span></span><br><span class="line"><span class="comment"># Generating public/private rsa key pair.</span></span><br><span class="line"><span class="comment"># Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): [Press enter]</span></span><br></pre></td></tr></table></figure><p>è¾“å…¥å¯†é’¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): [Type a passphrase]</span><br><span class="line"><span class="comment">#Enter same passphrase again: [Type passphrase again]</span></span><br></pre></td></tr></table></figure><p>æœ€åä½ ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved <span class="keyword">in</span> /c/Users/you/.ssh/id_rsa.</span><br><span class="line"><span class="comment"># Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.</span></span><br><span class="line"><span class="comment"># The key fingerprint is:</span></span><br><span class="line"><span class="comment"># 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span></span><br></pre></td></tr></table></figure><p>ä½ éœ€è¦æŠŠå®ƒæ·»åŠ åˆ°ssh-agentsé‡Œå»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># start the ssh-agent in the background</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><br><span class="line"><span class="comment"># Agent pid 59566</span></span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨Notepad++ä¹‹ç±»çš„ç¼–è¾‘å™¨æ‰“å¼€<code>~/.ssh/id_rsa.pub</code>æ–‡ä»¶æŠŠå†…å®¹å¤åˆ¶åˆ°å¯¹åº”ä½ç½®ï¼š</p><p>GitCafÃ©ï¼šã€è´¦æˆ·è®¾ç½®-&gt;SSHå…¬é’¥ç®¡ç†-&gt;æ·»åŠ æ–°çš„å…¬é’¥ã€</p><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>npm install -g hexo-cli</p></blockquote><p>è¿™æ˜¯Hexoå®˜ç½‘ä¸Šçš„å®‰è£…æ–¹å¼ï¼Œä½†åœ¨å›½å†…å¹¶ä¸å¥½ç”¨ã€‚åœ¨å›½å†…å¯ä»¥ä½¿ç”¨<a href="http://npm.taobao.org/" target="_blank" rel="noopener">æ·˜å®æä¾›çš„NPMé•œåƒ</a>ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬ã€‚</p><p>ä½¿ç”¨è¯´æ˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåä½¿ç”¨npmæ—¶å°†æ‰€æœ‰<code>npm</code>æ›¿æ¢ä¸º<code>cnpm</code>å³å¯ã€‚å³ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>å®Œæˆhexoçš„å®‰è£…</p><h2 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">cnpm install</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p><strong>æ³¨æ„ï¼šä½¿ç”¨Hexoæ—¶ï¼Œæ— è®ºæ˜¯ä¿®æ”¹<code>*.yml</code>æ–‡ä»¶ï¼Œè¿˜æ˜¯æ’°å†™æ–‡ç« ï¼Œåœ¨å†’å·åé¢éƒ½è¦ç•™æœ‰ä¸€ä¸ªè‹±æ–‡ç©ºæ ¼ï¼</strong></p><p>åœ¨<code>~/.ssh/blog/_config.yml</code>æ–‡ä»¶ä¸­æœ‰è®¸å¤šåšå®¢çš„é…ç½®é€‰é¡¹ã€‚</p><p>æ•´ç«™çš„åŸºæœ¬ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: Li<span class="string">'s Blog #ç½‘ç«™æ ‡é¢˜</span></span><br><span class="line"><span class="string">subtitle: What have you done today to make you feel proud? #ç½‘ç«™å‰¯æ ‡é¢˜</span></span><br><span class="line"><span class="string">description: å†™å­—çš„åœ°æ–¹ #ç»™æœç´¢å¼•æ“çœ‹çš„ç½‘ç«™æè¿°</span></span><br><span class="line"><span class="string">author: Double X Li #ä½œè€…</span></span><br><span class="line"><span class="string">email: me@doublex.li #ä½œè€…é‚®ç®±</span></span><br><span class="line"><span class="string">language: zh-Hans #è¯­è¨€</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰åŸŸåï¼Œä½ å¯ä»¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url: https://blog.doublex.li <span class="comment">#ä½ çš„åŸŸå</span></span><br></pre></td></tr></table></figure><p>æ—¥æœŸ/æ—¶é—´æ ¼å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date_format: LLL</span><br><span class="line">time_format: HH:mm:ss</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªäººçš„ä¹ æƒ¯ä¸ä¸€æ ·ï¼Œä½ å¯ä»¥å‚ç…§<a href="http://momentjs.com/" target="_blank" rel="noopener">Moment.jsæ–‡æ¡£</a>é€‰æ‹©è‡ªå·±çš„æ ¼å¼ï¼Œæ³¨æ„å…ˆåˆ°ä¸‹æ–¹é€‰æ‹©å›½å®¶ã€‚</p><h2 id="å†™æ–‡ç« "><a href="#å†™æ–‡ç« " class="headerlink" title="å†™æ–‡ç« "></a>å†™æ–‡ç« </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"Hello Hexo"</span> <span class="comment">#å¯ç®€åŒ–ä¸º hexo n "Hello Hexo"</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåœ¨<code>~/.ssh/blog/source/_posts</code>ç›®å½•ä¸‹äº§ç”Ÿ<code>title.md</code>çš„MarkDownæ–‡ä»¶ï¼Œå¯ç”¨<a href="http://markdownpad.com/" target="_blank" rel="noopener">MarkdownPad</a>ä¹‹ç±»çš„Markdownç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘ï¼Œ<a href="http://wowubuntu.com/markdown/" title="ç‚¹å‡»æŸ¥çœ‹Markdownè¯­æ³•" target="_blank" rel="noopener">Markdown</a>æ˜¯ä¸€ç§ä¼˜ç§€çš„äº’è”ç½‘å†…å®¹ä¹¦å†™è¯­è¨€ã€‚</p><center><br>ä¸¾ä¸ªæ —å­<br><br><img src="https://ooo.0o0.ooo/2016/11/15/582acd1e1ed7a.jpg" alt=""><br></center><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: å‘å¸ƒæ—¶é—´</span><br><span class="line">tags: æ ‡ç­¾</span><br><span class="line">- tag1</span><br><span class="line">- tag2</span><br><span class="line">- ...</span><br><span class="line">---</span><br><span class="line">æ–‡ç« æ‘˜è¦</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">æ­£æ–‡</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆé™æ€é¡µé¢"><a href="#ç”Ÿæˆé™æ€é¡µé¢" class="headerlink" title="ç”Ÿæˆé™æ€é¡µé¢"></a>ç”Ÿæˆé™æ€é¡µé¢</h2><p>åœ¨<code>~/.ssh/blog</code>ç›®å½•ä¸‹ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate <span class="comment">#å¯ç®€åŒ–ä¸º hexo g</span></span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨æœ¬åœ°æœåŠ¡"><a href="#å¯åŠ¨æœ¬åœ°æœåŠ¡" class="headerlink" title="å¯åŠ¨æœ¬åœ°æœåŠ¡"></a>å¯åŠ¨æœ¬åœ°æœåŠ¡</h2><p>ç„¶åå¯åŠ¨æœ¬åœ°æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server <span class="comment">#å¯ç®€åŒ–ä¸º hexo s</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œä½ çš„Hexoå°±åœ¨æœ¬åœ°éƒ¨ç½²å¥½äº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a>å°±å¯ä»¥çœ‹åˆ°æ•ˆæœã€‚</p><h1 id="é…ç½®Git"><a href="#é…ç½®Git" class="headerlink" title="é…ç½®Git"></a>é…ç½®Git</h1><h2 id="å®‰è£…deployer"><a href="#å®‰è£…deployer" class="headerlink" title="å®‰è£…deployer"></a>å®‰è£…deployer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®deploy"><a href="#è®¾ç½®deploy" class="headerlink" title="è®¾ç½®deploy"></a>è®¾ç½®deploy</h2><p>æ‰“å¼€<code>~/.ssh/blog/_config.yml</code>ï¼Œåœ¨æœ€ä¸‹æ–¹ä¿®æ”¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@git.coding.net:username/username.git</span><br><span class="line">  branch: coding-pages</span><br><span class="line">  message:</span><br></pre></td></tr></table></figure><p>è¯·å°†<code>username</code>å…¨éƒ¨æ›¿æ¢ä¸ºä½ çš„Codingç”¨æˆ·åï¼Œè®¾ç½®åå†™å¥½äº†æ–‡ç« åªéœ€<code>hexo deploy -generate</code>ï¼Œå¯ç®€åŒ–ä¸º<code>hexo d -g</code>ï¼Œæ–‡ç« ä¾¿ä¼šå‘è¡¨åˆ°Coding Pagesä¸Šã€‚</p><h1 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h1><p>æ›´å¤šHexoä½¿ç”¨æ–¹æ³•è¯·å‚é˜…<a href="http://hexo.io/docs/" target="_blank" rel="noopener">Hexoå®˜æ–¹æ–‡æ¡£</a>ã€‚</p>]]></content>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
